!function(){"use strict";var t={d:function(e,r){for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},o:function(t,e){return{}.hasOwnProperty.call(t,e)},r:function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};function r(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{u(n.next(t))}catch(t){s(t)}}function a(t){try{u(n.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}u((n=n.apply(t,e||[])).next())}))}function n(t,e){var r,n,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(u){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&i[3]>a[1])){s.label=a[1];break}if(6===a[0]&&i[1]>s.label){s.label=i[1],i=a;break}if(i&&i[2]>s.label){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}function i(t,e,r){if(r||2===arguments.length)for(var n,i=0,s=e.length;s>i;i++)!n&&i in e||(n||(n=[].slice.call(e,0,i)),n[i]=e[i]);return t.concat(n||[].slice.call(e))}t.r(e),t.d(e,{CrossFrameClient:function(){return o},CrossFrameServer:function(){return s},createCrossFrameClient:function(){return u},createCrossFrameServer:function(){return a}}),"function"==typeof SuppressedError&&SuppressedError;var s=function(){function t(t,e){this._targetOrigin="*",this._api=t,e&&(this._targetOrigin=e),window.addEventListener("message",this._handleMessage.bind(this)),this._setupEventForwarding()}return t.prototype._handleMessage=function(t){var e=t.data;e&&e.messageId&&e.method&&this._processMessage(e,t.source,t.origin)},t.prototype._processMessage=function(t,e,r){var n,i,s,o=t.messageId,a=t.method,u=t.params;try{if("function"!=typeof this._api[a])throw Error("Method ".concat(a," not found on API"));i=(n=this._api)[a].apply(n,u)}catch(t){s=t instanceof Error?{message:t.message,stack:t.stack}:{message:t+""}}e.postMessage({messageId:o,result:i,error:s},this._targetOrigin)},t.prototype._setupEventForwarding=function(){var t=this,e=Array.from(document.querySelectorAll("iframe"));this._api.on("*",(function(r){for(var n=[],i=1;arguments.length>i;i++)n[i-1]=arguments[i];e.forEach((function(e){e.contentWindow&&e.contentWindow.postMessage({event:r,args:n},t._targetOrigin)}))}))},t}(),o=function(){function t(t){this._targetOrigin="*",this._pendingRequests=new Map,this._eventListeners=new Map,this._messageIdCounter=0,this._childFrames=new Set,this._isInitialized=!1,this._lastError="0",this._cache=new Map,t&&(this._targetOrigin=t),window.addEventListener("message",this._handleMessage.bind(this))}return t.prototype._handleMessage=function(t){var e=this,r=t.data,n=t.source,s=n!==window.parent&&n!==window;if(!r.messageId||void 0===r.result&&void 0===r.error||s||this._handleMethodResponse(r),r.messageId&&r.method&&s){this._childFrames.add(n);var o=r.messageId,a=r.method,u=r.params,c="forwarded-".concat(o);this._pendingRequests.set(c,{resolve:function(t){n.postMessage({messageId:o,result:t},e._targetOrigin)},reject:function(t){n.postMessage({messageId:o,error:t},e._targetOrigin)},source:n}),window.parent.postMessage({messageId:c,method:a,params:u},this._targetOrigin),setTimeout((function(){if(e._pendingRequests.has(c)){var t=e._pendingRequests.get(c);e._pendingRequests.delete(c),(null==t?void 0:t.source)&&t.source.postMessage({messageId:o,error:{message:"Timeout waiting for response to method ".concat(a)}},e._targetOrigin)}}),5e3)}r.event&&!s&&(this._handleEvent.apply(this,i([r.event],r.args||[],!1)),this._forwardEventToChildFrames(r.event,r.args||[]))},t.prototype._handleMethodResponse=function(t){var e=t.messageId,r=t.result,n=t.error,i=this._pendingRequests.get(e);if(i){var s=i.resolve;n?(0,i.reject)(n):s(r),this._pendingRequests.delete(e)}},t.prototype._handleEvent=function(t){for(var e=[],r=1;arguments.length>r;r++)e[r-1]=arguments[r];var n=this._eventListeners.get(t);n&&n.forEach((function(r){try{r.apply(void 0,e)}catch(e){console.error("Error in event listener for ".concat(t,":"),e)}}));var s=this._eventListeners.get("*");s&&s.forEach((function(r){try{r.apply(void 0,i([t],e,!1))}catch(e){console.error('Error in "*" event listener for '.concat(t,":"),e)}}))},t.prototype._forwardEventToChildFrames=function(t,e){var r=this;this._childFrames.forEach((function(n){try{n.postMessage({event:t,args:e},r._targetOrigin)}catch(t){console.error("Error forwarding event to child frame:",t)}}))},t.prototype._sendMessage=function(t,e){var r=this;return void 0===e&&(e=[]),new Promise((function(n,i){var s="".concat(Date.now(),"-").concat(r._messageIdCounter++);r._pendingRequests.set(s,{resolve:n,reject:i}),window.parent.postMessage({messageId:s,method:t,params:e},r._targetOrigin),setTimeout((function(){r._pendingRequests.has(s)&&(r._pendingRequests.delete(s),i(Error("Timeout waiting for response to method ".concat(t))))}),5e3)}))},t.prototype.initialize=function(){return r(this,void 0,void 0,(function(){var t;return n(this,(function(e){switch(e.label){case 0:return[4,this._sendMessage("lmsInitialize")];case 1:return t=e.sent(),this._isInitialized="true"===t,[2,this._isInitialized]}}))}))},t.prototype.lmsInitialize=function(){return this._isInitialized?(this._lastError="101","false"):(r(this,void 0,void 0,(function(){var t,e;return n(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.initialize()];case 1:return t=r.sent(),this._isInitialized=t,this._lastError=t?"0":"101",[3,3];case 2:return e=r.sent(),this._lastError="101",this._isInitialized=!1,console.error("Error in lmsInitialize:",e),[3,3];case 3:return[2]}}))})),this._isInitialized=!0,this._lastError="0","true")},t.prototype.Initialize=function(){return r(this,void 0,void 0,(function(){return n(this,(function(t){return[2,this.initialize()]}))}))},t.prototype.LMSInitialize=function(){return this.lmsInitialize()},t.prototype.terminate=function(){return r(this,void 0,void 0,(function(){var t,e;return n(this,(function(r){switch(r.label){case 0:return[4,this._sendMessage("lmsFinish")];case 1:return t=r.sent(),(e="true"===t)&&(this._isInitialized=!1),[2,e]}}))}))},t.prototype.lmsFinish=function(){return this._isInitialized?(r(this,void 0,void 0,(function(){var t;return n(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.terminate()];case 1:return e.sent()?(this._isInitialized=!1,this._lastError="0"):this._lastError="101",[3,3];case 2:return t=e.sent(),this._lastError="101",console.error("Error in lmsFinish:",t),[3,3];case 3:return[2]}}))})),this._isInitialized=!1,this._lastError="0","true"):(this._lastError="301","false")},t.prototype.Terminate=function(){return r(this,void 0,void 0,(function(){return n(this,(function(t){return[2,this.terminate()]}))}))},t.prototype.LMSFinish=function(){return this.lmsFinish()},t.prototype.getValue=function(t){return r(this,void 0,void 0,(function(){var e,r,i;return n(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this._sendMessage("lmsGetValue",[t])];case 1:return e=n.sent(),this._cache.set(t,r=e+""),[2,r];case 2:return i=n.sent(),this._lastError="101",console.error("Error in getValue(".concat(t,"):"),i),[2,""];case 3:return[2]}}))}))},t.prototype.lmsGetValue=function(t){r(this,void 0,void 0,(function(){var e;return n(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.getValue(t)];case 1:return r.sent(),[3,3];case 2:return e=r.sent(),this._lastError="101",console.error("Error in lmsGetValue(".concat(t,"):"),e),[3,3];case 3:return[2]}}))}));var e=this._cache.get(t);return this._lastError="0",e||""},t.prototype.GetValue=function(t){return r(this,void 0,void 0,(function(){return n(this,(function(e){return[2,this.getValue(t)]}))}))},t.prototype.LMSGetValue=function(t){return this.lmsGetValue(t)},t.prototype.setValue=function(t,e){return r(this,void 0,void 0,(function(){var r,i,s;return n(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this._sendMessage("lmsSetValue",[t,e])];case 1:return r=n.sent(),(i="true"===r)&&this._cache.set(t,e+""),[2,i];case 2:return s=n.sent(),this._lastError="101",console.error("Error in setValue(".concat(t,", ").concat(e,"):"),s),[2,!1];case 3:return[2]}}))}))},t.prototype.lmsSetValue=function(t,e){return this._isInitialized?t&&""!==t?(this._cache.set(t,e+""),r(this,void 0,void 0,(function(){var r,i;return n(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.setValue(t,e)];case 1:return r=n.sent(),this._lastError=r?"0":"201",[3,3];case 2:return i=n.sent(),this._lastError="101",console.error("Error in lmsSetValue(".concat(t,", ").concat(e,"):"),i),[3,3];case 3:return[2]}}))})),this._lastError="0","true"):(this._lastError="201","false"):(this._lastError="301","false")},t.prototype.SetValue=function(t,e){return r(this,void 0,void 0,(function(){return n(this,(function(r){return[2,this.setValue(t,e)]}))}))},t.prototype.LMSSetValue=function(t,e){return this.lmsSetValue(t,e)},t.prototype.commit=function(){return r(this,void 0,void 0,(function(){var t;return n(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this._sendMessage("lmsCommit")];case 1:return[2,"true"===e.sent()];case 2:return t=e.sent(),this._lastError="101",console.error("Error in commit:",t),[2,!1];case 3:return[2]}}))}))},t.prototype.lmsCommit=function(){return this._isInitialized?(r(this,void 0,void 0,(function(){var t,e;return n(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.commit()];case 1:return t=r.sent(),this._lastError=t?"0":"101",[3,3];case 2:return e=r.sent(),this._lastError="101",console.error("Error in lmsCommit:",e),[3,3];case 3:return[2]}}))})),this._lastError="0","true"):(this._lastError="301","false")},t.prototype.Commit=function(){return r(this,void 0,void 0,(function(){return n(this,(function(t){return[2,this.commit()]}))}))},t.prototype.LMSCommit=function(){return this.lmsCommit()},t.prototype.getLastError=function(){return r(this,void 0,void 0,(function(){var t,e;return n(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this._sendMessage("lmsGetLastError")];case 1:return t=r.sent(),this._lastError=t+"",[2,this._lastError];case 2:return e=r.sent(),console.error("Error in getLastError:",e),[2,"101"];case 3:return[2]}}))}))},t.prototype.lmsGetLastError=function(){return r(this,void 0,void 0,(function(){var t;return n(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.getLastError()];case 1:return e.sent(),[3,3];case 2:return t=e.sent(),console.error("Error in lmsGetLastError:",t),[3,3];case 3:return[2]}}))})),this._lastError},t.prototype.GetLastError=function(){return r(this,void 0,void 0,(function(){return n(this,(function(t){return[2,this.getLastError()]}))}))},t.prototype.LMSGetLastError=function(){return this.lmsGetLastError()},t.prototype.getErrorString=function(t){return r(this,void 0,void 0,(function(){var e,r,i;return n(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this._sendMessage("lmsGetErrorString",[t])];case 1:return e=n.sent(),r=e+"",this._cache.set("error_".concat(t),r),[2,r];case 2:return i=n.sent(),console.error("Error in getErrorString(".concat(t,"):"),i),[2,""];case 3:return[2]}}))}))},t.prototype.lmsGetErrorString=function(t){return r(this,void 0,void 0,(function(){var e;return n(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.getErrorString(t)];case 1:return r.sent(),[3,3];case 2:return e=r.sent(),console.error("Error in lmsGetErrorString(".concat(t,"):"),e),[3,3];case 3:return[2]}}))})),this._cache.get("error_".concat(t))||"No error"},t.prototype.GetErrorString=function(t){return r(this,void 0,void 0,(function(){return n(this,(function(e){return[2,this.getErrorString(t)]}))}))},t.prototype.LMSGetErrorString=function(t){return this.lmsGetErrorString(t)},t.prototype.getDiagnostic=function(t){return r(this,void 0,void 0,(function(){var e,r,i;return n(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this._sendMessage("lmsGetDiagnostic",[t])];case 1:return e=n.sent(),r=e+"",this._cache.set("diagnostic_".concat(t),r),[2,r];case 2:return i=n.sent(),console.error("Error in getDiagnostic(".concat(t,"):"),i),[2,""];case 3:return[2]}}))}))},t.prototype.lmsGetDiagnostic=function(t){return r(this,void 0,void 0,(function(){var e;return n(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.getDiagnostic(t)];case 1:return r.sent(),[3,3];case 2:return e=r.sent(),console.error("Error in lmsGetDiagnostic(".concat(t,"):"),e),[3,3];case 3:return[2]}}))})),this._cache.get("diagnostic_".concat(t))||"No diagnostic information available"},t.prototype.GetDiagnostic=function(t){return r(this,void 0,void 0,(function(){return n(this,(function(e){return[2,this.getDiagnostic(t)]}))}))},t.prototype.LMSGetDiagnostic=function(t){return this.lmsGetDiagnostic(t)},t.prototype.isInitialized=function(){return r(this,void 0,void 0,(function(){var t,e;return n(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this._sendMessage("isInitialized")];case 1:return t=r.sent(),this._isInitialized=!!t,[2,this._isInitialized];case 2:return e=r.sent(),console.error("Error in isInitialized:",e),[2,this._isInitialized];case 3:return[2]}}))}))},t.prototype.getIsInitialized=function(){return r(this,void 0,void 0,(function(){var t;return n(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.isInitialized()];case 1:return e.sent(),[3,3];case 2:return t=e.sent(),console.error("Error in getIsInitialized:",t),[3,3];case 3:return[2]}}))})),this._isInitialized},t.prototype.on=function(t,e){this._eventListeners.has(t)||this._eventListeners.set(t,new Set);var r=this._eventListeners.get(t);r&&r.add(e)},t.prototype.off=function(t,e){var r=this._eventListeners.get(t);r&&(r.delete(e),0===r.size&&this._eventListeners.delete(t))},t}();function a(t,e){return new s(t,e)}function u(t){return new o(t)}var c=window;for(var h in e)c[h]=e[h];e.__esModule&&Object.defineProperty(c,"__esModule",{value:!0})}();