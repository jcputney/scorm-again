!function(){"use strict";var e={273:function(e,t,r){r.r(t),r.d(t,{default:function(){return b}});var n=r(635),i=r(340),o=r(864),s=r(56),a={autocommit:!1,autocommitSeconds:10,asyncCommit:!1,sendFullCommit:!0,lmsCommitUrl:!1,dataCommitFormat:"json",commitRequestDataType:"application/json;charset=UTF-8",autoProgress:!1,logLevel:s.LogLevelEnum.ERROR,selfReportSessionTime:!1,alwaysSendTotalTime:!1,renderCommonCommitFields:!1,strict_errors:!0,xhrHeaders:{},xhrWithCredentials:!1,fetchMode:"cors",responseHandler:function(e){return(0,n.__awaiter)(this,void 0,void 0,(function(){var t,r;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:return void 0===e?[3,2]:[4,e.text()];case 1:return t=n.sent(),r=null,t&&(r=JSON.parse(t)),null!==r&&{}.hasOwnProperty.call(r,"result")?[2,{result:r.result,errorCode:r.errorCode?r.errorCode:r.result===i.global_constants.SCORM_TRUE?0:101}]:200===e.status?[2,{result:i.global_constants.SCORM_TRUE,errorCode:0}]:[2,{result:i.global_constants.SCORM_FALSE,errorCode:101}];case 2:return[2,{result:i.global_constants.SCORM_FALSE,errorCode:101}]}}))}))},requestHandler:function(e){return e},onLogMessage:c,scoItemIds:[],scoItemIdValidator:!1,globalObjectiveIds:[]};function c(e,t){switch(e){case"4":case 4:case"ERROR":case s.LogLevelEnum.ERROR:console.error(t);break;case"3":case 3:case"WARN":case s.LogLevelEnum.WARN:console.warn(t);break;case"2":case 2:case"INFO":case s.LogLevelEnum.INFO:console.info(t);break;case"1":case 1:case"DEBUG":case s.LogLevelEnum.DEBUG:console.debug?console.debug(t):console.log(t)}}var l=function(){function e(e,t,r){this._cancelled=!1,this._API=e,this._timeout=setTimeout(this.wrapper.bind(this),t),this._callback=r}return e.prototype.cancel=function(){this._cancelled=!0,this._timeout&&clearTimeout(this._timeout)},e.prototype.wrapper=function(){this._cancelled||(0,n.__awaiter)(this,void 0,void 0,(function(){return(0,n.__generator)(this,(function(e){switch(e.label){case 0:return[4,this._API.commit(this._callback)];case 1:return[2,e.sent()]}}))}))},e}(),u=function(){function e(e,t){this.settings=e,this.error_codes=t}return e.prototype.processHttpRequest=function(e,t){return(0,n.__awaiter)(this,arguments,void 0,(function(e,t,r,o,a){var c,l,u=this;return void 0===r&&(r=!1),(0,n.__generator)(this,(function(_){switch(_.label){case 0:return c={result:i.global_constants.SCORM_FALSE,errorCode:this.error_codes.GENERAL},r?(this.performFetch(e,t).then((function(e){return(0,n.__awaiter)(u,void 0,void 0,(function(){return(0,n.__generator)(this,(function(t){switch(t.label){case 0:return[4,this.transformResponse(e,a)];case 1:return t.sent(),[2]}}))}))})),[2,{result:i.global_constants.SCORM_TRUE,errorCode:0}]):(l=function(e,t,r){return(0,n.__awaiter)(u,void 0,void 0,(function(){var i,l;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t=r.requestHandler(t),[4,this.performFetch(e,t)];case 1:return i=n.sent(),[2,this.transformResponse(i,a)];case 2:return l=n.sent(),o("processHttpRequest",l,s.LogLevelEnum.ERROR),a("CommitError"),[2,c];case 3:return[2]}}))}))},[4,l(e,t,this.settings)]);case 1:return[2,_.sent()]}}))}))},e.prototype.performFetch=function(e,t){return(0,n.__awaiter)(this,void 0,void 0,(function(){return(0,n.__generator)(this,(function(r){return[2,fetch(e,{method:"POST",mode:this.settings.fetchMode,body:t instanceof Array?t.join("&"):JSON.stringify(t),headers:(0,n.__assign)((0,n.__assign)({},this.settings.xhrHeaders),{"Content-Type":this.settings.commitRequestDataType}),credentials:this.settings.xhrWithCredentials?"include":void 0,keepalive:!0})]}))}))},e.prototype.transformResponse=function(e,t){return(0,n.__awaiter)(this,void 0,void 0,(function(){var r,o;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:return"function"!=typeof this.settings.responseHandler?[3,2]:[4,this.settings.responseHandler(e)];case 1:return o=n.sent(),[3,4];case 2:return[4,e.json()];case 3:o=n.sent(),n.label=4;case 4:return r=o,e.status>=200&&e.status<=299&&(!0===r.result||r.result===i.global_constants.SCORM_TRUE)?(t("CommitSuccess"),Object.hasOwnProperty.call(r,"errorCode")||(r.errorCode=0)):(t("CommitError"),Object.hasOwnProperty.call(r,"errorCode")||(r.errorCode=this.error_codes.GENERAL)),[2,r]}}))}))},e.prototype.updateSettings=function(e){this.settings=e},e}(),_=function(){function e(e){this.apiLog=e,this.listenerMap=new Map,this.listenerCount=0}return e.prototype.parseListenerName=function(e){var t=e.split(".");if(0===t.length)return null;var r=t[0],n=null;return t.length>1&&(n=e.replace("".concat(r,"."),"")),{functionName:r,CMIElement:n}},e.prototype.on=function(e,t){var r;if(t)for(var n=0,i=e.split(" ");n<i.length;n++){var o=i[n],a=this.parseListenerName(o);if(a){var c=a.functionName,l=a.CMIElement,u=null!==(r=this.listenerMap.get(c))&&void 0!==r?r:[];u.push({functionName:c,CMIElement:l,callback:t}),this.listenerMap.set(c,u),this.listenerCount++,this.apiLog("on","Added event listener: ".concat(this.listenerCount),s.LogLevelEnum.INFO,c)}}},e.prototype.off=function(e,t){if(t)for(var r=e.split(" "),n=function(e){var r=i.parseListenerName(e);if(!r)return"continue";var n=r.functionName,o=r.CMIElement,a=i.listenerMap.get(n);if(!a)return"continue";var c=a.findIndex((function(e){return e.CMIElement===o&&e.callback===t}));-1!==c&&(a.splice(c,1),i.listenerCount--,0===a.length?i.listenerMap.delete(n):i.listenerMap.set(n,a),i.apiLog("off","Removed event listener: ".concat(i.listenerCount),s.LogLevelEnum.INFO,n))},i=this,o=0,a=r;o<a.length;o++)n(a[o])},e.prototype.clear=function(e){for(var t=e.split(" "),r=function(e){var t=n.parseListenerName(e);if(!t)return"continue";var r=t.functionName,i=t.CMIElement;if(n.listenerMap.has(r)){var o=n.listenerMap.get(r),s=o.filter((function(e){return e.CMIElement!==i}));n.listenerCount-=o.length-s.length,0===s.length?n.listenerMap.delete(r):n.listenerMap.set(r,s)}},n=this,i=0,o=t;i<o.length;i++)r(o[i])},e.prototype.processListeners=function(e,t,r){this.apiLog(e,r,s.LogLevelEnum.INFO,t);var n=this.listenerMap.get(e);if(n)for(var i=0,a=n;i<a.length;i++){var c=a[i],l=!!c.CMIElement,u=!1;if(t&&c.CMIElement&&c.CMIElement.endsWith("*")){var _=c.CMIElement.slice(0,-1);u=(0,o.stringMatches)(t,_)}else u=c.CMIElement===t;l&&!u||(this.apiLog("processListeners","Processing listener: ".concat(c.functionName),s.LogLevelEnum.DEBUG,t),c.callback(t,r))}},e.prototype.reset=function(){this.listenerMap.clear(),this.listenerCount=0},e}(),d=function(){function e(){}return e.prototype.loadFromFlattenedJSON=function(e,t,r,n,i){if(void 0===t&&(t=""),i()){var s=/^(cmi\.interactions\.)(\d+)\.(.*)$/,a=/^(cmi\.objectives\.)(\d+)\.(.*)$/,c=[],l=[],u=[];for(var _ in e)if(Object.prototype.hasOwnProperty.call(e,_)){var d=_.match(s);if(d){c.push({key:_,value:e[_],index:Number(d[2]),field:d[3]});continue}var h=_.match(a);if(h){l.push({key:_,value:e[_],index:Number(h[2]),field:h[3]});continue}u.push({key:_,value:e[_]})}c.sort((function(e,t){return e.index!==t.index?e.index-t.index:"id"===e.field?-1:"id"===t.field?1:"type"===e.field?-1:"type"===t.field?1:e.field.localeCompare(t.field)})),l.sort((function(e,t){return e.index!==t.index?e.index-t.index:"id"===e.field?-1:"id"===t.field?1:e.field.localeCompare(t.field)})),u.sort((function(e,t){return e.key.localeCompare(t.key)}));var m=function(e){e.forEach((function(e){var n={};n[e.key]=e.value,r((0,o.unflatten)(n),t)}))};m(c),m(l),m(u)}else console.error("loadFromFlattenedJSON can only be called before the call to lmsInitialize.")},e.prototype.loadFromJSON=function(e,t,r,n,i){if(void 0===t&&(t=""),n()){for(var o in t=void 0!==t?t:"cmi",i(e),e)if(Object.prototype.hasOwnProperty.call(e,o)&&e[o]){var s=(t?t+".":"")+o,a=e[o];if(a.constructor===Array){for(var c=0;c<a.length;c++)if(a[c]){var l=a[c],u="".concat(s,".").concat(c);l.constructor===Object?this.loadFromJSON(l,u,r,n,i):r(u,l)}}else a.constructor===Object?this.loadFromJSON(a,s,r,n,i):r(s,a)}}else console.error("loadFromJSON can only be called before the call to lmsInitialize.")},e.prototype.renderCMIToJSONString=function(e,t){return t?JSON.stringify({cmi:e}):JSON.stringify({cmi:e},(function(e,t){return void 0===t?null:t}),2)},e.prototype.renderCMIToJSONObject=function(e,t){return JSON.parse(this.renderCMIToJSONString(e,t))},e.prototype.getCommitObject=function(e,t,r,n,i,o){var a=e||t,c=r?n(a):i(a);return[s.LogLevelEnum.DEBUG,"1",1,"DEBUG"].includes(o)&&(console.debug("Commit (terminated: "+(e?"yes":"no")+"): "),console.debug(c)),c},e}(),h=r(784),m=r(589);function f(e){return e instanceof m.CMIArray}var p=function(){function e(e,t,r,n,i,o,s){this._error_codes=e,this._apiLog=t,this._throwSCORMError=r,this._validateCorrectResponse=n,this._getChildElement=i,this._checkObjectHasProperty=o,this._errorHandlingService=s}return e.prototype.updateLastErrorCode=function(e){this._errorHandlingService.lastErrorCode=e},e.prototype.throwSCORMError=function(e,t){this._throwSCORMError(e,t)},e.prototype.setCMIValue=function(e,t,r,a,c,l){if(!a||""===a)return i.global_constants.SCORM_FALSE;for(var u=a.split("."),_=e,d=i.global_constants.SCORM_FALSE,h=!1,m="The data model element passed to ".concat(t," (").concat(a,") is not a valid SCORM data model element."),p=r?this._error_codes.UNDEFINED_DATA_MODEL:this._error_codes.GENERAL,g=0;g<u.length;g++){var E=u[g];if(g===u.length-1)r&&"{target="===E.substring(0,8)?l?this.throwSCORMError(this._error_codes.READ_ONLY_ELEMENT):_=(0,n.__assign)((0,n.__assign)({},_),{attribute:c}):this._checkObjectHasProperty(_,E)?((0,o.stringMatches)(a,"\\.correct_responses\\.\\d+")&&l&&this._validateCorrectResponse(a,c),r&&"0"!==this._errorHandlingService.lastErrorCode||(_[E]=c,d=i.global_constants.SCORM_TRUE)):this.throwSCORMError(p,m);else{if(!(_=_[E])){this.throwSCORMError(p,m);break}if(f(_)){var v=parseInt(u[g+1],10);if(!isNaN(v)){var b=_.childArray[v];if(b)_=b,h=!0;else{var y=this._getChildElement(a,c,h);h=!0,y?(_.initialized&&y.initialize(),_.childArray.push(y),_=y):this.throwSCORMError(p,m)}g++}}}}return d===i.global_constants.SCORM_FALSE&&this._apiLog(t,"There was an error setting the value for: ".concat(a,", value of: ").concat(c),s.LogLevelEnum.WARN),d},e.prototype.getCMIValue=function(e,t,r,n){if(!n||""===n)return"";for(var i=n.split("."),o=e,s=null,a="The data model element passed to ".concat(t," (").concat(n,") has not been initialized."),c="The data model element passed to ".concat(t," (").concat(n,") is not a valid SCORM data model element."),l=r?this._error_codes.UNDEFINED_DATA_MODEL:this._error_codes.GENERAL,u=0;u<i.length;u++){if(s=i[u],r){if("{target="===String(s).substring(0,8)&&"function"==typeof o._isTargetValid){var _=String(s).substring(8,String(s).length-9);return o._isTargetValid(_)}if(!this._checkObjectHasProperty(o,s))return void this.throwSCORMError(l,c)}else if(u===i.length-1&&!this._checkObjectHasProperty(o,s))return void this.throwSCORMError(l,c);if(void 0===(o=o[s])){this.throwSCORMError(l,c);break}if(f(o)){var d=parseInt(i[u+1],10);if(!isNaN(d)){var h=o.childArray[d];if(!h){this.throwSCORMError(this._error_codes.VALUE_NOT_INITIALIZED,a);break}o=h,u++}}}if(null!=o)return o;r||("_children"===s?this.throwSCORMError(this._error_codes.CHILDREN_ERROR):"_count"===s&&this.throwSCORMError(this._error_codes.COUNT_ERROR))},e}(),g=function(){function e(e,t,r){this._lastErrorCode="0",this._errorCodes=e,this._apiLog=t,this._getLmsErrorMessageDetails=r}return Object.defineProperty(e.prototype,"lastErrorCode",{get:function(){return this._lastErrorCode},set:function(e){this._lastErrorCode=e},enumerable:!1,configurable:!0}),e.prototype.throwSCORMError=function(e,t){t||(t=this._getLmsErrorMessageDetails(e)),this._apiLog("throwSCORMError",e+": "+t,s.LogLevelEnum.ERROR),this._lastErrorCode=String(e)},e.prototype.clearSCORMError=function(e){void 0!==e&&e!==i.global_constants.SCORM_FALSE&&(this._lastErrorCode="0")},e.prototype.handleValueAccessException=function(e,t){return e instanceof h.ValidationError?(this._lastErrorCode=String(e.errorCode),t=i.global_constants.SCORM_FALSE):(e instanceof Error&&e.message?console.error(e.message):console.error(e),this.throwSCORMError(this._errorCodes.GENERAL)),t},Object.defineProperty(e.prototype,"errorCodes",{get:function(){return this._errorCodes},enumerable:!1,configurable:!0}),e}(),E=function(){function e(){this._logLevel=s.LogLevelEnum.ERROR,this._logHandler=c}return e.getInstance=function(){return e._instance||(e._instance=new e),e._instance},e.prototype.setLogLevel=function(e){this._logLevel=e},e.prototype.getLogLevel=function(){return this._logLevel},e.prototype.setLogHandler=function(e){this._logHandler=e},e.prototype.log=function(e,t){this.shouldLog(e)&&this._logHandler(e,t)},e.prototype.error=function(e){this.log(s.LogLevelEnum.ERROR,e)},e.prototype.warn=function(e){this.log(s.LogLevelEnum.WARN,e)},e.prototype.info=function(e){this.log(s.LogLevelEnum.INFO,e)},e.prototype.debug=function(e){this.log(s.LogLevelEnum.DEBUG,e)},e.prototype.shouldLog=function(e){return this.getNumericLevel(e)>=this.getNumericLevel(this._logLevel)},e.prototype.getNumericLevel=function(e){if(void 0===e)return s.LogLevelEnum.NONE;if("number"==typeof e)return e;switch(e){case"1":case"DEBUG":return s.LogLevelEnum.DEBUG;case"2":case"INFO":return s.LogLevelEnum.INFO;case"3":case"WARN":return s.LogLevelEnum.WARN;case"4":case"ERROR":default:return s.LogLevelEnum.ERROR;case"5":case"NONE":return s.LogLevelEnum.NONE}},e}(),v=function(){function e(t,r,n,o,c,l,h,m){var f,v,b,y=this.constructor;if(this._settings=a,y===e)throw new TypeError("Cannot construct BaseAPI instances directly");this.currentState=i.global_constants.STATE_NOT_INITIALIZED,this._error_codes=t,r&&(this.settings=r),this.apiLogLevel=this.settings.logLevel,this.selfReportSessionTime=this.settings.selfReportSessionTime,void 0===this.apiLogLevel&&(this.apiLogLevel=s.LogLevelEnum.NONE),this._loggingService=m||E.getInstance(),this._loggingService.setLogLevel(this.apiLogLevel),this.settings.onLogMessage&&this._loggingService.setLogHandler(this.settings.onLogMessage),this._httpService=n||new u(this.settings,this._error_codes),this._eventService=o||new _(this.apiLog.bind(this)),this._serializationService=c||new d,this._errorHandlingService=h||(f=this._error_codes,v=this.apiLog.bind(this),b=this.getLmsErrorMessageDetails.bind(this),new g(f,v,b)),this._cmiDataService=l||new p(this._error_codes,this.apiLog.bind(this),this.throwSCORMError.bind(this),this.validateCorrectResponse.bind(this),this.getChildElement.bind(this),this._checkObjectHasProperty.bind(this),this._errorHandlingService)}return Object.defineProperty(e.prototype,"lastErrorCode",{get:function(){var e,t;return null!==(t=null===(e=this._errorHandlingService)||void 0===e?void 0:e.lastErrorCode)&&void 0!==t?t:"0"},set:function(e){this._errorHandlingService&&(this._errorHandlingService.lastErrorCode=e)},enumerable:!1,configurable:!0}),e.prototype.commonReset=function(e){this.apiLog("reset","Called",s.LogLevelEnum.INFO),this.settings=(0,n.__assign)((0,n.__assign)({},this.settings),e),this.clearScheduledCommit(),this.currentState=i.global_constants.STATE_NOT_INITIALIZED,this.lastErrorCode="0",this._eventService.reset(),this.startingData=void 0},e.prototype.initialize=function(e,t,r){var n=i.global_constants.SCORM_FALSE;return this.isInitialized()?this.throwSCORMError(this._error_codes.INITIALIZED,t):this.isTerminated()?this.throwSCORMError(this._error_codes.TERMINATED,r):(this.selfReportSessionTime&&this.cmi.setStartTime(),this.currentState=i.global_constants.STATE_INITIALIZED,this.lastErrorCode="0",n=i.global_constants.SCORM_TRUE,this.processListeners(e)),this.apiLog(e,"returned: "+n,s.LogLevelEnum.INFO),this.clearSCORMError(n),n},e.prototype.apiLog=function(e,t,r,n){t=(0,o.formatMessage)(e,t,n),r>=this.apiLogLevel&&(this._loggingService.log(r,t),this.settings.onLogMessage&&this.settings.onLogMessage!==this._loggingService._logHandler&&this.settings.onLogMessage(r,t))},Object.defineProperty(e.prototype,"error_codes",{get:function(){return this._error_codes},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"settings",{get:function(){return this._settings},set:function(e){var t,r,i,o=this._settings;this._settings=(0,n.__assign)((0,n.__assign)({},this._settings),e),null===(t=this._httpService)||void 0===t||t.updateSettings(this._settings),void 0!==e.logLevel&&e.logLevel!==o.logLevel&&(this.apiLogLevel=e.logLevel,null===(r=this._loggingService)||void 0===r||r.setLogLevel(e.logLevel)),void 0!==e.onLogMessage&&e.onLogMessage!==o.onLogMessage&&(null===(i=this._loggingService)||void 0===i||i.setLogHandler(e.onLogMessage))},enumerable:!1,configurable:!0}),e.prototype.terminate=function(e,t){return(0,n.__awaiter)(this,void 0,void 0,(function(){var r,o,a,c;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:return r=i.global_constants.SCORM_FALSE,this.checkState(t,this._error_codes.TERMINATION_BEFORE_INIT,this._error_codes.MULTIPLE_TERMINATION)?(this.currentState=i.global_constants.STATE_TERMINATED,[4,this.storeData(!0)]):[3,2];case 1:o=n.sent(),(null!==(a=o.errorCode)&&void 0!==a?a:0)>0&&this.throwSCORMError(o.errorCode),r=null!==(c=null==o?void 0:o.result)&&void 0!==c?c:i.global_constants.SCORM_FALSE,t&&(this.lastErrorCode="0"),r=i.global_constants.SCORM_TRUE,this.processListeners(e),n.label=2;case 2:return this.apiLog(e,"returned: "+r,s.LogLevelEnum.INFO),this.clearSCORMError(r),[2,r]}}))}))},e.prototype.getValue=function(e,t,r){var n="";if(this.checkState(t,this._error_codes.RETRIEVE_BEFORE_INIT,this._error_codes.RETRIEVE_AFTER_TERM)){t&&(this.lastErrorCode="0");try{n=this.getCMIValue(r)}catch(e){n=this.handleValueAccessException(e,n)}this.processListeners(e,r)}return this.apiLog(e,": returned: "+n,s.LogLevelEnum.INFO,r),void 0===n?"":(this.clearSCORMError(n),n)},e.prototype.setValue=function(e,t,r,n,o){void 0!==o&&(o=String(o));var a=i.global_constants.SCORM_FALSE;if(this.checkState(r,this._error_codes.STORE_BEFORE_INIT,this._error_codes.STORE_AFTER_TERM)){r&&(this.lastErrorCode="0");try{a=this.setCMIValue(n,o)}catch(e){a=this.handleValueAccessException(e,a)}this.processListeners(e,n,o)}return void 0===a&&(a=i.global_constants.SCORM_FALSE),"0"===String(this.lastErrorCode)&&this.settings.autocommit&&this.scheduleCommit(1e3*this.settings.autocommitSeconds,t),this.apiLog(e,": "+o+": result: "+a,s.LogLevelEnum.INFO,n),this.clearSCORMError(a),a},e.prototype.commit=function(e){return(0,n.__awaiter)(this,arguments,void 0,(function(e,t){var r,o,a,c;return void 0===t&&(t=!1),(0,n.__generator)(this,(function(n){switch(n.label){case 0:return this.clearScheduledCommit(),r=i.global_constants.SCORM_FALSE,this.checkState(t,this._error_codes.COMMIT_BEFORE_INIT,this._error_codes.COMMIT_AFTER_TERM)?[4,this.storeData(!1)]:[3,2];case 1:o=n.sent(),(null!==(a=o.errorCode)&&void 0!==a?a:0)>0&&this.throwSCORMError(o.errorCode),r=null!==(c=null==o?void 0:o.result)&&void 0!==c?c:i.global_constants.SCORM_FALSE,this.apiLog(e," Result: "+r,s.LogLevelEnum.DEBUG,"HttpRequest"),t&&(this.lastErrorCode="0"),this.processListeners(e),n.label=2;case 2:return this.apiLog(e,"returned: "+r,s.LogLevelEnum.INFO),this.clearSCORMError(r),[2,r]}}))}))},e.prototype.getLastError=function(e){var t=String(this.lastErrorCode);return this.processListeners(e),this.apiLog(e,"returned: "+t,s.LogLevelEnum.INFO),t},e.prototype.getErrorString=function(e,t){var r="";return null!==t&&""!==t&&(r=this.getLmsErrorMessageDetails(t),this.processListeners(e)),this.apiLog(e,"returned: "+r,s.LogLevelEnum.INFO),r},e.prototype.getDiagnostic=function(e,t){var r="";return null!==t&&""!==t&&(r=this.getLmsErrorMessageDetails(t,!0),this.processListeners(e)),this.apiLog(e,"returned: "+r,s.LogLevelEnum.INFO),r},e.prototype.checkState=function(e,t,r){return this.isNotInitialized()?(this.throwSCORMError(t),!1):!e||!this.isTerminated()||(this.throwSCORMError(r),!1)},e.prototype.getLmsErrorMessageDetails=function(e,t){throw void 0===t&&(t=!1),new Error("The getLmsErrorMessageDetails method has not been implemented")},e.prototype.getCMIValue=function(e){throw new Error("The getCMIValue method has not been implemented")},e.prototype.setCMIValue=function(e,t){throw new Error("The setCMIValue method has not been implemented")},e.prototype._commonSetCMIValue=function(e,t,r,n){return this._cmiDataService.setCMIValue(this,e,t,r,n,this.isInitialized())},e.prototype._commonGetCMIValue=function(e,t,r){return this._cmiDataService.getCMIValue(this,e,t,r)},e.prototype.isInitialized=function(){return this.currentState===i.global_constants.STATE_INITIALIZED},e.prototype.isNotInitialized=function(){return this.currentState===i.global_constants.STATE_NOT_INITIALIZED},e.prototype.isTerminated=function(){return this.currentState===i.global_constants.STATE_TERMINATED},e.prototype.on=function(e,t){this._eventService.on(e,t)},e.prototype.off=function(e,t){this._eventService.off(e,t)},e.prototype.clear=function(e){this._eventService.clear(e)},e.prototype.processListeners=function(e,t,r){this._eventService.processListeners(e,t,r)},e.prototype.throwSCORMError=function(e,t){this._errorHandlingService.throwSCORMError(e,t)},e.prototype.clearSCORMError=function(e){this._errorHandlingService.clearSCORMError(e)},e.prototype.loadFromFlattenedJSON=function(e,t){t||(t=""),this._serializationService.loadFromFlattenedJSON(e,t,this.loadFromJSON.bind(this),this.setCMIValue.bind(this),this.isNotInitialized.bind(this))},e.prototype.loadFromJSON=function(e,t){var r=this;void 0===t&&(t=""),this._serializationService.loadFromJSON(e,t,this.setCMIValue.bind(this),this.isNotInitialized.bind(this),(function(e){r.startingData=e}))},e.prototype.renderCMIToJSONString=function(){return this._serializationService.renderCMIToJSONString(this.cmi,this.settings.sendFullCommit)},e.prototype.renderCMIToJSONObject=function(){return this._serializationService.renderCMIToJSONObject(this.cmi,this.settings.sendFullCommit)},e.prototype.processHttpRequest=function(e,t){return(0,n.__awaiter)(this,arguments,void 0,(function(e,t,r){return void 0===r&&(r=!1),(0,n.__generator)(this,(function(n){return[2,this._httpService.processHttpRequest(e,t,r,this.apiLog.bind(this),this.processListeners.bind(this))]}))}))},e.prototype.scheduleCommit=function(e,t){this._timeout||(this._timeout=new l(this,e,t),this.apiLog("scheduleCommit","scheduled",s.LogLevelEnum.DEBUG,""))},e.prototype.clearScheduledCommit=function(){this._timeout&&(this._timeout.cancel(),this._timeout=void 0,this.apiLog("clearScheduledCommit","cleared",s.LogLevelEnum.DEBUG,""))},e.prototype._checkObjectHasProperty=function(e,t){return Object.hasOwnProperty.call(e,t)||null!=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(e),t)||t in e},e.prototype.handleValueAccessException=function(e,t){return this._errorHandlingService.handleValueAccessException(e,t)},e.prototype.getCommitObject=function(e){return this._serializationService.getCommitObject(e,this.settings.alwaysSendTotalTime,this.settings.renderCommonCommitFields,this.renderCommitObject.bind(this),this.renderCommitCMI.bind(this),this.apiLogLevel)},e}(),b=v},589:function(e,t,r){r.r(t),r.d(t,{CMIArray:function(){return a}});var n=r(635),i=r(319),o=r(784),s=r(797),a=function(e){function t(t){var r=e.call(this)||this;return r.__children=t.children,r._errorCode=t.errorCode||s.scorm12_errors.GENERAL,r._errorClass=t.errorClass||o.BaseScormValidationError,r.childArray=[],r}return(0,n.__extends)(t,e),t.prototype.reset=function(e){if(void 0===e&&(e=!1),this._initialized=!1,e)this.childArray=[];else for(var t=0;t<this.childArray.length;t++)this.childArray[t].reset()},Object.defineProperty(t.prototype,"_children",{get:function(){return this.__children},set:function(e){throw new this._errorClass(this._errorCode)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_count",{get:function(){return this.childArray.length},set:function(e){throw new this._errorClass(this._errorCode)},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){this.jsonString=!0;for(var e={},t=0;t<this.childArray.length;t++)e[t+""]=this.childArray[t];return delete this.jsonString,e},t}(i.BaseCMI)},319:function(e,t,r){r.r(t),r.d(t,{BaseCMI:function(){return i},BaseRootCMI:function(){return o}});var n=r(635),i=function(){function e(){this.jsonString=!1,this._initialized=!1}return Object.defineProperty(e.prototype,"initialized",{get:function(){return this._initialized},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"start_time",{get:function(){return this._start_time},enumerable:!1,configurable:!0}),e.prototype.initialize=function(){this._initialized=!0},e.prototype.setStartTime=function(){this._start_time=(new Date).getTime()},e}(),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t}(i)},434:function(e,t,r){r.r(t),r.d(t,{CMIScore:function(){return l}});var n=r(635),i=r(340),o=r(417),s=r(319),a=r(797),c=r(819),l=function(e){function t(t){var r=e.call(this)||this;return r._raw="",r._min="",r.__children=t.score_children||i.scorm12_constants.score_children,r.__score_range=!!t.score_range&&o.scorm12_regex.score_range,r._max=t.max||""===t.max?t.max:"100",r.__invalid_error_code=t.invalidErrorCode||a.scorm12_errors.INVALID_SET_VALUE,r.__invalid_type_code=t.invalidTypeCode||a.scorm12_errors.TYPE_MISMATCH,r.__invalid_range_code=t.invalidRangeCode||a.scorm12_errors.VALUE_OUT_OF_RANGE,r.__decimal_regex=t.decimalRegex||o.scorm12_regex.CMIDecimal,r.__error_class=t.errorClass,r}return(0,n.__extends)(t,e),t.prototype.reset=function(){this._initialized=!1},Object.defineProperty(t.prototype,"_children",{get:function(){return this.__children},set:function(e){throw new this.__error_class(this.__invalid_error_code)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"raw",{get:function(){return this._raw},set:function(e){c.validationService.validateScore(e,this.__decimal_regex,this.__score_range,this.__invalid_type_code,this.__invalid_range_code,this.__error_class)&&(this._raw=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"min",{get:function(){return this._min},set:function(e){c.validationService.validateScore(e,this.__decimal_regex,this.__score_range,this.__invalid_type_code,this.__invalid_range_code,this.__error_class)&&(this._min=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return this._max},set:function(e){c.validationService.validateScore(e,this.__decimal_regex,this.__score_range,this.__invalid_type_code,this.__invalid_range_code,this.__error_class)&&(this._max=e)},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){this.jsonString=!0;var e={raw:this.raw,min:this.min,max:this.max};return delete this.jsonString,e},t}(s.BaseCMI)},449:function(e,t,r){r.r(t),r.d(t,{checkValidFormat:function(){return i},checkValidRange:function(){return o}});var n=r(864),i=(0,n.memoize)((function(e,t,r,n,i){if("string"!=typeof e)return!1;var o=new RegExp(t),s=e.match(o);if(i&&""===e)return!0;if(void 0===e||!s||""===s[0])throw new n(r);return!0}),(function(e,t,r,n,i){return"".concat(e,":").concat(t,":").concat(r,":").concat(i||!1)})),o=(0,n.memoize)((function(e,t,r,n){var i=t.split("#");if((e*=1)>=i[0]){if("*"===i[1]||e<=i[1])return!0;throw new n(r)}throw new n(r)}),(function(e,t,r,n){return"".concat(e,":").concat(t,":").concat(r)}))},915:function(e,t,r){r.r(t),r.d(t,{check12ValidFormat:function(){return s},check12ValidRange:function(){return a}});var n=r(449),i=r(797),o=r(179);function s(e,t,r){return(0,n.checkValidFormat)(e,t,i.scorm12_errors.TYPE_MISMATCH,o.Scorm12ValidationError,r)}function a(e,t,r){if(!r&&""===e)throw new o.Scorm12ValidationError(i.scorm12_errors.VALUE_OUT_OF_RANGE);return(0,n.checkValidRange)(e,t,i.scorm12_errors.VALUE_OUT_OF_RANGE,o.Scorm12ValidationError)}},340:function(e,t,r){r.r(t),r.d(t,{aicc_constants:function(){return s},global_constants:function(){return i},scorm12_constants:function(){return o},scorm2004_constants:function(){return a}});var n=r(635),i={SCORM_TRUE:"true",SCORM_FALSE:"false",STATE_NOT_INITIALIZED:0,STATE_INITIALIZED:1,STATE_TERMINATED:2},o={cmi_children:"core,suspend_data,launch_data,comments,objectives,student_data,student_preference,interactions",core_children:"student_id,student_name,lesson_location,credit,lesson_status,entry,score,total_time,lesson_mode,exit,session_time",score_children:"raw,min,max",comments_children:"content,location,time",objectives_children:"id,score,status",correct_responses_children:"pattern",student_data_children:"mastery_score,max_time_allowed,time_limit_action",student_preference_children:"audio,language,speed,text",interactions_children:"id,objectives,time,type,correct_responses,weighting,student_response,result,latency",error_descriptions:{101:{basicMessage:"General Exception",detailMessage:"No specific error code exists to describe the error. Use LMSGetDiagnostic for more information"},201:{basicMessage:"Invalid argument error",detailMessage:"Indicates that an argument represents an invalid data model element or is otherwise incorrect."},202:{basicMessage:"Element cannot have children",detailMessage:'Indicates that LMSGetValue was called with a data model element name that ends in "_children" for a data model element that does not support the "_children" suffix.'},203:{basicMessage:"Element not an array - cannot have count",detailMessage:'Indicates that LMSGetValue was called with a data model element name that ends in "_count" for a data model element that does not support the "_count" suffix.'},301:{basicMessage:"Not initialized",detailMessage:"Indicates that an API call was made before the call to lmsInitialize."},401:{basicMessage:"Not implemented error",detailMessage:"The data model element indicated in a call to LMSGetValue or LMSSetValue is valid, but was not implemented by this LMS. SCORM 1.2 defines a set of data model elements as being optional for an LMS to implement."},402:{basicMessage:"Invalid set value, element is a keyword",detailMessage:'Indicates that LMSSetValue was called on a data model element that represents a keyword (elements that end in "_children" and "_count").'},403:{basicMessage:"Element is read only",detailMessage:"LMSSetValue was called with a data model element that can only be read."},404:{basicMessage:"Element is write only",detailMessage:"LMSGetValue was called on a data model element that can only be written to."},405:{basicMessage:"Incorrect Data Type",detailMessage:"LMSSetValue was called with a value that is not consistent with the data format of the supplied data model element."},407:{basicMessage:"Element Value Out Of Range",detailMessage:"The numeric value supplied to a LMSSetValue call is outside of the numeric range allowed for the supplied data model element."},408:{basicMessage:"Data Model Dependency Not Established",detailMessage:"Some data model elements cannot be set until another data model element was set. This error condition indicates that the prerequisite element was not set before the dependent element."}}},s=(0,n.__assign)((0,n.__assign)({},o),{cmi_children:"core,suspend_data,launch_data,comments,objectives,student_data,student_preference,interactions,evaluation",student_preference_children:"audio,language,lesson_type,speed,text,text_color,text_location,text_size,video,windows",student_data_children:"attempt_number,tries,mastery_score,max_time_allowed,time_limit_action",student_demographics_children:"city,class,company,country,experience,familiar_name,instructor_name,title,native_language,state,street_address,telephone,years_experience",tries_children:"time,status,score",attempt_records_children:"score,lesson_status",paths_children:"location_id,date,time,status,why_left,time_in_element"}),a={cmi_children:"_version,comments_from_learner,comments_from_lms,completion_status,credit,entry,exit,interactions,launch_data,learner_id,learner_name,learner_preference,location,max_time_allowed,mode,objectives,progress_measure,scaled_passing_score,score,session_time,success_status,suspend_data,time_limit_action,total_time",comments_children:"comment,timestamp,location",score_children:"max,raw,scaled,min",objectives_children:"progress_measure,completion_status,success_status,description,score,id",correct_responses_children:"pattern",student_data_children:"mastery_score,max_time_allowed,time_limit_action",student_preference_children:"audio_level,audio_captioning,delivery_speed,language",interactions_children:"id,type,objectives,timestamp,correct_responses,weighting,learner_response,result,latency,description",adl_data_children:"id,store",error_descriptions:{0:{basicMessage:"No Error",detailMessage:"No error occurred, the previous API call was successful."},101:{basicMessage:"General Exception",detailMessage:"No specific error code exists to describe the error. Use GetDiagnostic for more information."},102:{basicMessage:"General Initialization Failure",detailMessage:"Call to Initialize failed for an unknown reason."},103:{basicMessage:"Already Initialized",detailMessage:"Call to Initialize failed because Initialize was already called."},104:{basicMessage:"Content Instance Terminated",detailMessage:"Call to Initialize failed because Terminate was already called."},111:{basicMessage:"General Termination Failure",detailMessage:"Call to Terminate failed for an unknown reason."},112:{basicMessage:"Termination Before Initialization",detailMessage:"Call to Terminate failed because it was made before the call to Initialize."},113:{basicMessage:"Termination After Termination",detailMessage:"Call to Terminate failed because Terminate was already called."},122:{basicMessage:"Retrieve Data Before Initialization",detailMessage:"Call to GetValue failed because it was made before the call to Initialize."},123:{basicMessage:"Retrieve Data After Termination",detailMessage:"Call to GetValue failed because it was made after the call to Terminate."},132:{basicMessage:"Store Data Before Initialization",detailMessage:"Call to SetValue failed because it was made before the call to Initialize."},133:{basicMessage:"Store Data After Termination",detailMessage:"Call to SetValue failed because it was made after the call to Terminate."},142:{basicMessage:"Commit Before Initialization",detailMessage:"Call to Commit failed because it was made before the call to Initialize."},143:{basicMessage:"Commit After Termination",detailMessage:"Call to Commit failed because it was made after the call to Terminate."},201:{basicMessage:"General Argument Error",detailMessage:"An invalid argument was passed to an API method (usually indicates that Initialize, Commit or Terminate did not receive the expected empty string argument."},301:{basicMessage:"General Get Failure",detailMessage:"Indicates a failed GetValue call where no other specific error code is applicable. Use GetDiagnostic for more information."},351:{basicMessage:"General Set Failure",detailMessage:"Indicates a failed SetValue call where no other specific error code is applicable. Use GetDiagnostic for more information."},391:{basicMessage:"General Commit Failure",detailMessage:"Indicates a failed Commit call where no other specific error code is applicable. Use GetDiagnostic for more information."},401:{basicMessage:"Undefined Data Model Element",detailMessage:"The data model element name passed to GetValue or SetValue is not a valid SCORM data model element."},402:{basicMessage:"Unimplemented Data Model Element",detailMessage:"The data model element indicated in a call to GetValue or SetValue is valid, but was not implemented by this LMS. In SCORM 2004, this error would indicate an LMS that is not fully SCORM conformant."},403:{basicMessage:"Data Model Element Value Not Initialized",detailMessage:"Attempt to read a data model element that has not been initialized by the LMS or through a SetValue call. This error condition is often reached during normal execution of a SCO."},404:{basicMessage:"Data Model Element Is Read Only",detailMessage:"SetValue was called with a data model element that can only be read."},405:{basicMessage:"Data Model Element Is Write Only",detailMessage:"GetValue was called on a data model element that can only be written to."},406:{basicMessage:"Data Model Element Type Mismatch",detailMessage:"SetValue was called with a value that is not consistent with the data format of the supplied data model element."},407:{basicMessage:"Data Model Element Value Out Of Range",detailMessage:"The numeric value supplied to a SetValue call is outside of the numeric range allowed for the supplied data model element."},408:{basicMessage:"Data Model Dependency Not Established",detailMessage:"Some data model elements cannot be set until another data model element was set. This error condition indicates that the prerequisite element was not set before the dependent element."}}}},56:function(e,t,r){var n,i,o,s;r.r(t),r.d(t,{CompletionStatus:function(){return o},LogLevelEnum:function(){return s},NAVBoolean:function(){return n},SuccessStatus:function(){return i}}),function(e){e.UNKNOWN="unknown",e.TRUE="true",e.FALSE="false"}(n||(n={})),function(e){e.PASSED="passed",e.FAILED="failed",e.UNKNOWN="unknown"}(i||(i={})),function(e){e.COMPLETED="completed",e.INCOMPLETE="incomplete",e.UNKNOWN="unknown"}(o||(o={})),function(e){e[e._=0]="_",e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.NONE=5]="NONE"}(s||(s={}))},797:function(e,t,r){r.r(t),r.d(t,{global_errors:function(){return i},scorm12_errors:function(){return o},scorm2004_errors:function(){return s}});var n=r(635),i={GENERAL:101,INITIALIZATION_FAILED:101,INITIALIZED:101,TERMINATED:101,TERMINATION_FAILURE:101,TERMINATION_BEFORE_INIT:101,MULTIPLE_TERMINATION:101,RETRIEVE_BEFORE_INIT:101,RETRIEVE_AFTER_TERM:101,STORE_BEFORE_INIT:101,STORE_AFTER_TERM:101,COMMIT_BEFORE_INIT:101,COMMIT_AFTER_TERM:101,ARGUMENT_ERROR:101,CHILDREN_ERROR:101,COUNT_ERROR:101,GENERAL_GET_FAILURE:101,GENERAL_SET_FAILURE:101,GENERAL_COMMIT_FAILURE:101,UNDEFINED_DATA_MODEL:101,UNIMPLEMENTED_ELEMENT:101,VALUE_NOT_INITIALIZED:101,INVALID_SET_VALUE:101,READ_ONLY_ELEMENT:101,WRITE_ONLY_ELEMENT:101,TYPE_MISMATCH:101,VALUE_OUT_OF_RANGE:101,DEPENDENCY_NOT_ESTABLISHED:101},o=(0,n.__assign)((0,n.__assign)({},i),{RETRIEVE_BEFORE_INIT:301,STORE_BEFORE_INIT:301,COMMIT_BEFORE_INIT:301,ARGUMENT_ERROR:201,CHILDREN_ERROR:202,COUNT_ERROR:203,UNDEFINED_DATA_MODEL:401,UNIMPLEMENTED_ELEMENT:401,VALUE_NOT_INITIALIZED:301,INVALID_SET_VALUE:402,READ_ONLY_ELEMENT:403,WRITE_ONLY_ELEMENT:404,TYPE_MISMATCH:405,VALUE_OUT_OF_RANGE:407,DEPENDENCY_NOT_ESTABLISHED:408}),s=(0,n.__assign)((0,n.__assign)({},i),{INITIALIZATION_FAILED:102,INITIALIZED:103,TERMINATED:104,TERMINATION_FAILURE:111,TERMINATION_BEFORE_INIT:112,MULTIPLE_TERMINATIONS:113,RETRIEVE_BEFORE_INIT:122,RETRIEVE_AFTER_TERM:123,STORE_BEFORE_INIT:132,STORE_AFTER_TERM:133,COMMIT_BEFORE_INIT:142,COMMIT_AFTER_TERM:143,ARGUMENT_ERROR:201,GENERAL_GET_FAILURE:301,GENERAL_SET_FAILURE:351,GENERAL_COMMIT_FAILURE:391,UNDEFINED_DATA_MODEL:401,UNIMPLEMENTED_ELEMENT:402,VALUE_NOT_INITIALIZED:403,READ_ONLY_ELEMENT:404,WRITE_ONLY_ELEMENT:405,TYPE_MISMATCH:406,VALUE_OUT_OF_RANGE:407,DEPENDENCY_NOT_ESTABLISHED:408})},417:function(e,t,r){r.r(t),r.d(t,{aicc_regex:function(){return o},scorm12_regex:function(){return i},scorm2004_regex:function(){return s}});var n=r(635),i={CMIString256:"^.{0,255}$",CMIString4096:"^.{0,4096}$",CMITime:"^(?:[01]\\d|2[0123]):(?:[012345]\\d):(?:[012345]\\d)$",CMITimespan:"^([0-9]{2,}):([0-9]{2}):([0-9]{2})(.[0-9]{1,2})?$",CMIInteger:"^\\d+$",CMISInteger:"^-?([0-9]+)$",CMIDecimal:"^-?([0-9]{0,3})(.[0-9]*)?$",CMIIdentifier:"^[\\u0021-\\u007E\\s]{0,255}$",CMIFeedback:"^.{0,255}$",CMIIndex:"[._](\\d+).",CMIStatus:"^(passed|completed|failed|incomplete|browsed)$",CMIStatus2:"^(passed|completed|failed|incomplete|browsed|not attempted)$",CMIExit:"^(time-out|suspend|logout|)$",CMIType:"^(true-false|choice|fill-in|matching|performance|sequencing|likert|numeric)$",CMIResult:"^(correct|wrong|unanticipated|neutral|([0-9]{0,3})?(\\.[0-9]*)?)$",NAVEvent:"^(previous|continue)$",score_range:"0#100",audio_range:"-1#100",speed_range:"-100#100",weighting_range:"-100#100",text_range:"-1#1"},o=(0,n.__assign)((0,n.__assign)({},i),{CMIIdentifier:"^\\w{1,255}$"}),s={CMIString200:"^[\\u0000-\\uFFFF]{0,200}$",CMIString250:"^[\\u0000-\\uFFFF]{0,250}$",CMIString1000:"^[\\u0000-\\uFFFF]{0,1000}$",CMIString4000:"^[\\u0000-\\uFFFF]{0,4000}$",CMIString64000:"^[\\u0000-\\uFFFF]{0,64000}$",CMILang:"^([a-zA-Z]{2,3}|i|x)(-[a-zA-Z0-9-]{2,8})?$|^$",CMILangString250:"^({lang=([a-zA-Z]{2,3}|i|x)(-[a-zA-Z0-9-]{2,8})?})?((?!{.*$).{0,250}$)?$",CMILangcr:"^(({lang=([a-zA-Z]{2,3}|i|x)?(-[a-zA-Z0-9-]{2,8})?}))(.*?)$",CMILangString250cr:"^(({lang=([a-zA-Z]{2,3}|i|x)?(-[a-zA-Z0-9-]{2,8})?})?(.{0,250})?)?$",CMILangString4000:"^({lang=([a-zA-Z]{2,3}|i|x)(-[a-zA-Z0-9-]{2,8})?})?((?!{.*$).{0,4000}$)?$",CMITime:"^(19[7-9]{1}[0-9]{1}|20[0-2]{1}[0-9]{1}|203[0-8]{1})((-(0[1-9]{1}|1[0-2]{1}))((-(0[1-9]{1}|[1-2]{1}[0-9]{1}|3[0-1]{1}))(T([0-1]{1}[0-9]{1}|2[0-3]{1})((:[0-5]{1}[0-9]{1})((:[0-5]{1}[0-9]{1})((\\.[0-9]{1,2})((Z|([+|-]([0-1]{1}[0-9]{1}|2[0-3]{1})))(:[0-5]{1}[0-9]{1})?)?)?)?)?)?)?)?$",CMITimespan:"^P(?:([.,\\d]+)Y)?(?:([.,\\d]+)M)?(?:([.,\\d]+)W)?(?:([.,\\d]+)D)?(?:T?(?:([.,\\d]+)H)?(?:([.,\\d]+)M)?(?:([.,\\d]+)S)?)?$",CMIInteger:"^\\d+$",CMISInteger:"^-?([0-9]+)$",CMIDecimal:"^-?([0-9]{1,5})(\\.[0-9]{1,18})?$",CMIIdentifier:"^\\S{1,250}[a-zA-Z0-9]$",CMIShortIdentifier:"^[\\w\\.\\-\\_]{1,250}$",CMILongIdentifier:"^(?:(?!urn:)\\S{1,4000}|urn:[A-Za-z0-9-]{1,31}:\\S{1,4000}|.{1,4000})$",CMIFeedback:"^.*$",CMIIndex:"[._](\\d+).",CMIIndexStore:".N(\\d+).",CMICStatus:"^(completed|incomplete|not attempted|unknown)$",CMISStatus:"^(passed|failed|unknown)$",CMIExit:"^(time-out|suspend|logout|normal)$",CMIType:"^(true-false|choice|fill-in|long-fill-in|matching|performance|sequencing|likert|numeric|other)$",CMIResult:"^(correct|incorrect|unanticipated|neutral|-?([0-9]{1,4})(\\.[0-9]{1,18})?)$",NAVEvent:"^(previous|continue|exit|exitAll|abandon|abandonAll|suspendAll|_none_|(\\{target=(?<choice_target>\\S{0,}[a-zA-Z0-9-_]+)})?choice|(\\{target=(?<jump_target>\\S{0,}[a-zA-Z0-9-_]+)})?jump)$",NAVBoolean:"^(unknown|true|false$)",NAVTarget:"^{target=\\S{0,}[a-zA-Z0-9-_]+}$",scaled_range:"-1#1",audio_range:"0#*",speed_range:"0#*",text_range:"-1#1",progress_range:"0#1"}},784:function(e,t,r){r.r(t),r.d(t,{BaseScormValidationError:function(){return i},ValidationError:function(){return o}});var n=r(635),i=function(e){function t(t){var r=e.call(this,t.toString())||this;return r._errorCode=t,r.name="ScormValidationError",r}return(0,n.__extends)(t,e),Object.defineProperty(t.prototype,"errorCode",{get:function(){return this._errorCode},enumerable:!1,configurable:!0}),t}(Error),o=function(e){function t(t,r,n){var i=e.call(this,t)||this;return i._detailedMessage="",i.message=r,i._errorMessage=r,n&&(i._detailedMessage=n),i}return(0,n.__extends)(t,e),Object.defineProperty(t.prototype,"errorMessage",{get:function(){return this._errorMessage},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"detailedMessage",{get:function(){return this._detailedMessage},enumerable:!1,configurable:!0}),t}(i)},179:function(e,t,r){r.r(t),r.d(t,{Scorm12ValidationError:function(){return s}});var n=r(635),i=r(784),o=r(340).scorm12_constants.error_descriptions,s=function(e){function t(t){return{}.hasOwnProperty.call(o,String(t))?e.call(this,t,o[String(t)].basicMessage,o[String(t)].detailMessage)||this:e.call(this,101,o[101].basicMessage,o[101].detailMessage)||this}return(0,n.__extends)(t,e),t}(i.ValidationError)},819:function(e,t,r){r.r(t),r.d(t,{ValidationService:function(){return c},validationService:function(){return l}});var n=r(449),i=r(915),o=r(417),s=r(797),a=r(179),c=function(){function e(){}return e.prototype.validateScore=function(e,t,r,i,o,s){return(0,n.checkValidFormat)(e,t,i,s)&&(!r||(0,n.checkValidRange)(e,r,o,s))},e.prototype.validateScorm12Audio=function(e){return(0,i.check12ValidFormat)(e,o.scorm12_regex.CMISInteger)&&(0,i.check12ValidRange)(e,o.scorm12_regex.audio_range)},e.prototype.validateScorm12Language=function(e){return(0,i.check12ValidFormat)(e,o.scorm12_regex.CMIString256)},e.prototype.validateScorm12Speed=function(e){return(0,i.check12ValidFormat)(e,o.scorm12_regex.CMISInteger)&&(0,i.check12ValidRange)(e,o.scorm12_regex.speed_range)},e.prototype.validateScorm12Text=function(e){return(0,i.check12ValidFormat)(e,o.scorm12_regex.CMISInteger)&&(0,i.check12ValidRange)(e,o.scorm12_regex.text_range)},e.prototype.validateReadOnly=function(e){if(e)throw new a.Scorm12ValidationError(s.scorm12_errors.READ_ONLY_ELEMENT)},e}(),l=new c},864:function(e,t,r){r.r(t),r.d(t,{SECONDS_PER_DAY:function(){return s},SECONDS_PER_HOUR:function(){return o},SECONDS_PER_MINUTE:function(){return i},SECONDS_PER_SECOND:function(){return n},addHHMMSSTimeStrings:function(){return h},addTwoDurations:function(){return d},countDecimals:function(){return p},flatten:function(){return m},formatMessage:function(){return g},getDurationAsSeconds:function(){return _},getSecondsAsHHMMSS:function(){return c},getSecondsAsISODuration:function(){return l},getTimeAsSeconds:function(){return u},memoize:function(){return v},stringMatches:function(){return E},unflatten:function(){return f}});var n=1,i=60,o=60*i,s=24*o,a={D:s,H:o,M:i,S:n},c=v((function(e){if(!e||e<=0)return"00:00:00";var t=Math.floor(e/o),r=new Date(1e3*e),n=r.getUTCMinutes(),i=r.getSeconds(),s=e%1,a="";return p(s)>0&&(a="."+(a=p(s)>2?s.toFixed(2):String(s)).split(".")[1]),(t+":"+n+":"+i).replace(/\b\d\b/g,"0$&")+a})),l=v((function(e){if(!e||e<=0)return"PT0S";var t="P",r=e;return Object.entries(a).forEach((function(e){var n=e[0],i=e[1],o=Math.floor(r/i);p(r%=i)>2&&(r=Number(Number(r).toFixed(2))),"S"===n&&r>0&&(o+=r),o&&((t.indexOf("D")>0||["H","M","S"].includes(n))&&-1===t.indexOf("T")&&(t+="T"),t+="".concat(o).concat(n))})),t})),u=v((function(e,t){var r;if("number"!=typeof e&&"boolean"!=typeof e||(e=String(e)),"string"==typeof t&&(t=new RegExp(t)),!e||!(null===(r=null==e?void 0:e.match)||void 0===r?void 0:r.call(e,t)))return 0;var n=e.split(":");return 3600*Number(n[0])+60*Number(n[1])+Number(n[2])}),(function(e,t){var r,n="string"==typeof e?e:String(null!=e?e:""),i="string"==typeof t?t:null!==(r=null==t?void 0:t.toString())&&void 0!==r?r:"";return"".concat(n,":").concat(i)})),_=v((function(e,t){var r,n,i,o;if("string"==typeof t&&(t=new RegExp(t)),!e||!(null===(r=null==e?void 0:e.match)||void 0===r?void 0:r.call(e,t)))return 0;var s=null!==(o=null===(i=(n=new RegExp(t)).exec)||void 0===i?void 0:i.call(n,e))&&void 0!==o?o:[],a=s[1],c=(s[2],s[4]),l=s[5],u=s[6],_=s[7],d=0;return d+=Number(_)||0,d+=60*Number(u)||0,d+=3600*Number(l)||0,(d+=86400*Number(c)||0)+(31536e3*Number(a)||0)}),(function(e,t){var r,n=null!=e?e:"",i="string"==typeof t?t:null!==(r=null==t?void 0:t.toString())&&void 0!==r?r:"";return"".concat(n,":").concat(i)}));function d(e,t,r){var n="string"==typeof r?new RegExp(r):r;return l(_(e,n)+_(t,n))}function h(e,t,r){return"string"==typeof r&&(r=new RegExp(r)),c(u(e,r)+u(t,r))}function m(e){var t={};return function e(r,n){if(Object(r)!==r)t[n]=r;else if(Array.isArray(r))r.forEach((function(t,r){e(t,"".concat(n,"[").concat(r,"]"))})),0===r.length&&(t[n]=[]);else{var i=Object.keys(r).filter((function(e){return Object.prototype.hasOwnProperty.call(r,e)})),o=0===i.length;i.forEach((function(t){e(r[t],n?"".concat(n,".").concat(t):t)})),o&&n&&(t[n]={})}}(e,""),t}function f(e){var t;if(Object(e)!==e||Array.isArray(e))return e;var r={},n=/\.?([^.[\]]+)|\[(\d+)]/g;return Object.keys(e).filter((function(t){return Object.prototype.hasOwnProperty.call(e,t)})).forEach((function(t){var i,o,s=r,a="",c=new RegExp(n);Array.from({length:null!==(o=null===(i=t.match(new RegExp(n,"g")))||void 0===i?void 0:i.length)&&void 0!==o?o:0},(function(){return c.exec(t)})).forEach((function(e){var t;e&&(s=null!==(t=s[a])&&void 0!==t?t:s[a]=e[2]?[]:{},a=e[2]||e[1])})),s[a]=e[t]})),null!==(t=r[""])&&void 0!==t?t:r}function p(e){var t,r,n,i;if(Math.floor(e)===e||(null===(r=null===(t=String(e))||void 0===t?void 0:t.indexOf)||void 0===r?void 0:r.call(t,"."))<0)return 0;var o=null===(n=e.toString().split("."))||void 0===n?void 0:n[1];return null!==(i=null==o?void 0:o.length)&&void 0!==i?i:0}function g(e,t,r){var n=e.padEnd(20),i="".concat(n,": ");return r&&(i=(i+=r).padEnd(70)),i+(null!=t?t:"")}function E(e,t){return null!==(null==e?void 0:e.match(t))}function v(e,t){var r=new Map;return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o,s=t?t.apply(void 0,n):JSON.stringify(n);return r.has(s)?r.get(s):(o=e.apply(void 0,n),r.set(s,o),o)}}},635:function(e,t,r){r.r(t),r.d(t,{__addDisposableResource:function(){return j},__assign:function(){return o},__asyncDelegator:function(){return O},__asyncGenerator:function(){return I},__asyncValues:function(){return C},__await:function(){return S},__awaiter:function(){return m},__classPrivateFieldGet:function(){return R},__classPrivateFieldIn:function(){return x},__classPrivateFieldSet:function(){return A},__createBinding:function(){return p},__decorate:function(){return a},__disposeResources:function(){return P},__esDecorate:function(){return l},__exportStar:function(){return g},__extends:function(){return i},__generator:function(){return f},__importDefault:function(){return N},__importStar:function(){return L},__makeTemplateObject:function(){return w},__metadata:function(){return h},__param:function(){return c},__propKey:function(){return _},__read:function(){return v},__rest:function(){return s},__runInitializers:function(){return u},__setFunctionName:function(){return d},__spread:function(){return b},__spreadArray:function(){return M},__spreadArrays:function(){return y},__values:function(){return E}});var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)};function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var o=function(){return o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)};function s(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}function a(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s}function c(e,t){return function(r,n){t(r,n,e)}}function l(e,t,r,n,i,o){function s(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var a,c=n.kind,l="getter"===c?"get":"setter"===c?"set":"value",u=!t&&e?n.static?e:e.prototype:null,_=t||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),d=!1,h=r.length-1;h>=0;h--){var m={};for(var f in n)m[f]="access"===f?{}:n[f];for(var f in n.access)m.access[f]=n.access[f];m.addInitializer=function(e){if(d)throw new TypeError("Cannot add initializers after decoration has completed");o.push(s(e||null))};var p=(0,r[h])("accessor"===c?{get:_.get,set:_.set}:_[l],m);if("accessor"===c){if(void 0===p)continue;if(null===p||"object"!=typeof p)throw new TypeError("Object expected");(a=s(p.get))&&(_.get=a),(a=s(p.set))&&(_.set=a),(a=s(p.init))&&i.unshift(a)}else(a=s(p))&&("field"===c?i.unshift(a):_[l]=a)}u&&Object.defineProperty(u,n.name,_),d=!0}function u(e,t,r){for(var n=arguments.length>2,i=0;i<t.length;i++)r=n?t[i].call(e,r):t[i].call(e);return n?r:void 0}function _(e){return"symbol"==typeof e?e:"".concat(e)}function d(e,t,r){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function h(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function m(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))}function f(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}var p=Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]};function g(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||p(t,e,r)}function E(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function v(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s}function b(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(v(arguments[t]));return e}function y(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n}function M(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}function S(e){return this instanceof S?(this.v=e,this):new S(e)}function I(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(e,t||[]),o=[];return n=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",(function(e){return function(t){return Promise.resolve(t).then(e,l)}})),n[Symbol.asyncIterator]=function(){return this},n;function s(e,t){i[e]&&(n[e]=function(t){return new Promise((function(r,n){o.push([e,t,r,n])>1||a(e,t)}))},t&&(n[e]=t(n[e])))}function a(e,t){try{(r=i[e](t)).value instanceof S?Promise.resolve(r.value.v).then(c,l):u(o[0][2],r)}catch(e){u(o[0][3],e)}var r}function c(e){a("next",e)}function l(e){a("throw",e)}function u(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function O(e){var t,r;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,i){t[n]=e[n]?function(t){return(r=!r)?{value:S(e[n](t)),done:!1}:i?i(t):t}:i}}function C(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=E(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,i){!function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)}(n,i,(t=e[r](t)).done,t.value)}))}}}function w(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var T=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function L(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&p(t,e,r);return T(t,e),t}function N(e){return e&&e.__esModule?e:{default:e}}function R(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function A(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r}function x(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}function j(e,t,r){if(null!=t){if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object expected.");var n,i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(void 0===n){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(i=n)}if("function"!=typeof n)throw new TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var D="function"==typeof SuppressedError?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function P(e){function t(t){e.error=e.hasError?new D(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var r,n=0;return function i(){for(;r=e.stack.pop();)try{if(!r.async&&1===n)return n=0,e.stack.push(r),Promise.resolve().then(i);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(o).then(i,(function(e){return t(e),i()}))}else n|=1}catch(e){t(e)}if(1===n)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()}t.default={__extends:i,__assign:o,__rest:s,__decorate:a,__param:c,__metadata:h,__awaiter:m,__generator:f,__createBinding:p,__exportStar:g,__values:E,__read:v,__spread:b,__spreadArrays:y,__spreadArray:M,__await:S,__asyncGenerator:I,__asyncDelegator:O,__asyncValues:C,__makeTemplateObject:w,__importStar:L,__importDefault:N,__classPrivateFieldGet:R,__classPrivateFieldSet:A,__classPrivateFieldIn:x,__addDisposableResource:j,__disposeResources:P}}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};r.r(n),r.d(n,{Scorm2004API:function(){return $}});var i=r(635),o=r(273),s=r(319),a=r(340),c=r(784),l=a.scorm2004_constants.error_descriptions,u=function(e){function t(t){return{}.hasOwnProperty.call(l,String(t))?e.call(this,t,l[String(t)].basicMessage,l[String(t)].detailMessage)||this:e.call(this,101,l[101].basicMessage,l[101].detailMessage)||this}return(0,i.__extends)(t,e),t}(c.ValidationError),_=r(797),d=r(449);function h(e,t,r){return(0,d.checkValidFormat)(e,t,_.scorm2004_errors.TYPE_MISMATCH,u,r)}function m(e,t){return(0,d.checkValidRange)(e,t,_.scorm2004_errors.VALUE_OUT_OF_RANGE,u)}var f=r(417),p=function(e){function t(){var t=e.call(this)||this;return t.__children=a.scorm2004_constants.student_preference_children,t._audio_level="1",t._language="",t._delivery_speed="1",t._audio_captioning="0",t}return(0,i.__extends)(t,e),t.prototype.reset=function(){this._initialized=!1},Object.defineProperty(t.prototype,"_children",{get:function(){return this.__children},set:function(e){throw new u(_.scorm2004_errors.READ_ONLY_ELEMENT)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"audio_level",{get:function(){return this._audio_level},set:function(e){h(e,f.scorm2004_regex.CMIDecimal)&&m(e,f.scorm2004_regex.audio_range)&&(this._audio_level=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"language",{get:function(){return this._language},set:function(e){h(e,f.scorm2004_regex.CMILang)&&(this._language=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"delivery_speed",{get:function(){return this._delivery_speed},set:function(e){h(e,f.scorm2004_regex.CMIDecimal)&&m(e,f.scorm2004_regex.speed_range)&&(this._delivery_speed=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"audio_captioning",{get:function(){return this._audio_captioning},set:function(e){h(e,f.scorm2004_regex.CMISInteger)&&m(e,f.scorm2004_regex.text_range)&&(this._audio_captioning=e)},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){this.jsonString=!0;var e={audio_level:this.audio_level,language:this.language,delivery_speed:this.delivery_speed,audio_captioning:this.audio_captioning};return delete this.jsonString,e},t}(s.BaseCMI),g=r(589),E={"true-false":{format:"^true$|^false$",max:1,delimiter:"",unique:!1},choice:{format:f.scorm2004_regex.CMILongIdentifier,max:36,delimiter:"[,]",unique:!0},"fill-in":{format:f.scorm2004_regex.CMILangString250,max:10,delimiter:"[,]",unique:!1},"long-fill-in":{format:f.scorm2004_regex.CMILangString4000,max:1,delimiter:"",unique:!1},matching:{format:f.scorm2004_regex.CMIShortIdentifier,format2:f.scorm2004_regex.CMIShortIdentifier,max:36,delimiter:"[,]",delimiter2:"[.]",unique:!1},performance:{format:"^$|"+f.scorm2004_regex.CMIShortIdentifier,format2:f.scorm2004_regex.CMIDecimal+"|^$|"+f.scorm2004_regex.CMIShortIdentifier,max:250,delimiter:"[,]",delimiter2:"[.]",unique:!1},sequencing:{format:f.scorm2004_regex.CMIShortIdentifier,max:36,delimiter:"[,]",unique:!1},likert:{format:f.scorm2004_regex.CMIShortIdentifier,max:1,delimiter:"",unique:!1},numeric:{format:f.scorm2004_regex.CMIDecimal,max:1,delimiter:"",unique:!1},other:{format:f.scorm2004_regex.CMIString4000,max:1,delimiter:"",unique:!1}},v={"true-false":{max:1,delimiter:"",unique:!1,duplicate:!1,format:"^true$|^false$",limit:1},choice:{max:36,delimiter:"[,]",unique:!0,duplicate:!1,format:f.scorm2004_regex.CMILongIdentifier},"fill-in":{max:10,delimiter:"[,]",unique:!1,duplicate:!1,format:f.scorm2004_regex.CMILangString250cr},"long-fill-in":{max:1,delimiter:"",unique:!1,duplicate:!0,format:f.scorm2004_regex.CMILangString4000},matching:{max:36,delimiter:"[,]",delimiter2:"[.]",unique:!1,duplicate:!1,format:f.scorm2004_regex.CMIShortIdentifier,format2:f.scorm2004_regex.CMIShortIdentifier},performance:{max:250,delimiter:"[,]",delimiter2:"[.]",delimiter3:"[:]",unique:!1,duplicate:!1,format:"^$|"+f.scorm2004_regex.CMIShortIdentifier,format2:f.scorm2004_regex.CMIDecimal+"|^$|"+f.scorm2004_regex.CMIShortIdentifier},sequencing:{max:36,delimiter:"[,]",unique:!1,duplicate:!1,format:f.scorm2004_regex.CMIShortIdentifier},likert:{max:1,delimiter:"",unique:!1,duplicate:!1,format:f.scorm2004_regex.CMIShortIdentifier,limit:1},numeric:{max:2,delimiter:"[:]",unique:!1,duplicate:!1,format:f.scorm2004_regex.CMIDecimal,limit:1},other:{max:1,delimiter:"",unique:!1,duplicate:!1,format:f.scorm2004_regex.CMIString4000,limit:1}},b=function(e){function t(){return e.call(this,{children:a.scorm2004_constants.interactions_children,errorCode:_.scorm2004_errors.READ_ONLY_ELEMENT,errorClass:u})||this}return(0,i.__extends)(t,e),t}(g.CMIArray),y=function(e){function t(){var t=e.call(this)||this;return t._id="",t._type="",t._timestamp="",t._weighting="",t._learner_response="",t._result="",t._latency="",t._description="",t.objectives=new g.CMIArray({errorCode:_.scorm2004_errors.READ_ONLY_ELEMENT,errorClass:u,children:a.scorm2004_constants.objectives_children}),t.correct_responses=new g.CMIArray({errorCode:_.scorm2004_errors.READ_ONLY_ELEMENT,errorClass:u,children:a.scorm2004_constants.correct_responses_children}),t}return(0,i.__extends)(t,e),t.prototype.initialize=function(){var t,r;e.prototype.initialize.call(this),null===(t=this.objectives)||void 0===t||t.initialize(),null===(r=this.correct_responses)||void 0===r||r.initialize()},t.prototype.reset=function(){this._initialized=!1,this._id="",this._type="",this._timestamp="",this._weighting="",this._learner_response="",this._result="",this._latency="",this._description="",this.objectives=new g.CMIArray({errorCode:_.scorm2004_errors.READ_ONLY_ELEMENT,errorClass:u,children:a.scorm2004_constants.objectives_children}),this.correct_responses=new g.CMIArray({errorCode:_.scorm2004_errors.READ_ONLY_ELEMENT,errorClass:u,children:a.scorm2004_constants.correct_responses_children})},Object.defineProperty(t.prototype,"id",{get:function(){return this._id},set:function(e){h(e,f.scorm2004_regex.CMILongIdentifier)&&(this._id=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this._type},set:function(e){if(this.initialized&&""===this._id)throw new u(_.scorm2004_errors.DEPENDENCY_NOT_ESTABLISHED);h(e,f.scorm2004_regex.CMIType)&&(this._type=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timestamp",{get:function(){return this._timestamp},set:function(e){if(this.initialized&&""===this._id)throw new u(_.scorm2004_errors.DEPENDENCY_NOT_ESTABLISHED);h(e,f.scorm2004_regex.CMITime)&&(this._timestamp=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"weighting",{get:function(){return this._weighting},set:function(e){if(this.initialized&&""===this._id)throw new u(_.scorm2004_errors.DEPENDENCY_NOT_ESTABLISHED);h(e,f.scorm2004_regex.CMIDecimal)&&(this._weighting=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"learner_response",{get:function(){return this._learner_response},set:function(e){if(this.initialized&&(""===this._type||""===this._id))throw new u(_.scorm2004_errors.DEPENDENCY_NOT_ESTABLISHED);var t=[],r=E[this.type];if(!r)throw new u(_.scorm2004_errors.TYPE_MISMATCH);if((null==r?void 0:r.delimiter)?t=e.split(r.delimiter):t[0]=e,!(t.length>0&&t.length<=r.max))throw new u(_.scorm2004_errors.GENERAL_SET_FAILURE);for(var n=new RegExp(r.format),i=0;i<t.length;i++)if(null==r?void 0:r.delimiter2){var o=t[i].split(r.delimiter2);if(2!==o.length)throw new u(_.scorm2004_errors.TYPE_MISMATCH);if(!o[0].match(n))throw new u(_.scorm2004_errors.TYPE_MISMATCH);if(!r.format2||!o[1].match(new RegExp(r.format2)))throw new u(_.scorm2004_errors.TYPE_MISMATCH)}else{if(!t[i].match(n))throw new u(_.scorm2004_errors.TYPE_MISMATCH);if(""!==t[i]&&r.unique)for(var s=0;s<i;s++)if(t[i]===t[s])throw new u(_.scorm2004_errors.TYPE_MISMATCH)}this._learner_response=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"result",{get:function(){return this._result},set:function(e){h(e,f.scorm2004_regex.CMIResult)&&(this._result=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"latency",{get:function(){return this._latency},set:function(e){if(this.initialized&&""===this._id)throw new u(_.scorm2004_errors.DEPENDENCY_NOT_ESTABLISHED);h(e,f.scorm2004_regex.CMITimespan)&&(this._latency=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"description",{get:function(){return this._description},set:function(e){if(this.initialized&&""===this._id)throw new u(_.scorm2004_errors.DEPENDENCY_NOT_ESTABLISHED);h(e,f.scorm2004_regex.CMILangString250,!0)&&(this._description=e)},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){this.jsonString=!0;var e={id:this.id,type:this.type,objectives:this.objectives,timestamp:this.timestamp,weighting:this.weighting,learner_response:this.learner_response,result:this.result,latency:this.latency,description:this.description,correct_responses:this.correct_responses};return delete this.jsonString,e},t}(s.BaseCMI),M=function(e){function t(){var t=e.call(this)||this;return t._id="",t}return(0,i.__extends)(t,e),t.prototype.reset=function(){this._initialized=!1,this._id=""},Object.defineProperty(t.prototype,"id",{get:function(){return this._id},set:function(e){h(e,f.scorm2004_regex.CMILongIdentifier)&&(this._id=e)},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){this.jsonString=!0;var e={id:this.id};return delete this.jsonString,e},t}(s.BaseCMI),S=function(e){function t(){var t=e.call(this)||this;return t._pattern="",t}return(0,i.__extends)(t,e),t.prototype.reset=function(){this._initialized=!1,this._pattern=""},Object.defineProperty(t.prototype,"pattern",{get:function(){return this._pattern},set:function(e){h(e,f.scorm2004_regex.CMIFeedback)&&(this._pattern=e)},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){this.jsonString=!0;var e={pattern:this.pattern};return delete this.jsonString,e},t}(s.BaseCMI),I=function(e){function t(){var t=e.call(this,{score_children:a.scorm2004_constants.score_children,max:"",invalidErrorCode:_.scorm2004_errors.READ_ONLY_ELEMENT,invalidTypeCode:_.scorm2004_errors.TYPE_MISMATCH,invalidRangeCode:_.scorm2004_errors.VALUE_OUT_OF_RANGE,decimalRegex:f.scorm2004_regex.CMIDecimal,errorClass:u})||this;return t._scaled="",t}return(0,i.__extends)(t,e),t.prototype.reset=function(){this._initialized=!1,this._scaled="",this._raw="",this._min="",this._max=""},Object.defineProperty(t.prototype,"scaled",{get:function(){return this._scaled},set:function(e){h(e,f.scorm2004_regex.CMIDecimal)&&m(e,f.scorm2004_regex.scaled_range)&&(this._scaled=e)},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){this.jsonString=!0;var e={scaled:this.scaled,raw:this.raw,min:this.min,max:this.max};return delete this.jsonString,e},t}(r(434).CMIScore),O=function(e){function t(){return e.call(this,{children:a.scorm2004_constants.comments_children,errorCode:_.scorm2004_errors.READ_ONLY_ELEMENT,errorClass:u})||this}return(0,i.__extends)(t,e),t}(g.CMIArray),C=function(e){function t(){return e.call(this,{children:a.scorm2004_constants.comments_children,errorCode:_.scorm2004_errors.READ_ONLY_ELEMENT,errorClass:u})||this}return(0,i.__extends)(t,e),t}(g.CMIArray),w=function(e){function t(t){void 0===t&&(t=!1);var r=e.call(this)||this;return r._comment="",r._location="",r._timestamp="",r._comment="",r._location="",r._timestamp="",r._readOnlyAfterInit=t,r}return(0,i.__extends)(t,e),t.prototype.reset=function(){this._initialized=!1},Object.defineProperty(t.prototype,"comment",{get:function(){return this._comment},set:function(e){if(this.initialized&&this._readOnlyAfterInit)throw new u(_.scorm2004_errors.READ_ONLY_ELEMENT);h(e,f.scorm2004_regex.CMILangString4000,!0)&&(this._comment=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"location",{get:function(){return this._location},set:function(e){if(this.initialized&&this._readOnlyAfterInit)throw new u(_.scorm2004_errors.READ_ONLY_ELEMENT);h(e,f.scorm2004_regex.CMIString250)&&(this._location=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timestamp",{get:function(){return this._timestamp},set:function(e){if(this.initialized&&this._readOnlyAfterInit)throw new u(_.scorm2004_errors.READ_ONLY_ELEMENT);h(e,f.scorm2004_regex.CMITime)&&(this._timestamp=e)},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){this.jsonString=!0;var e={comment:this.comment,location:this.location,timestamp:this.timestamp};return delete this.jsonString,e},t}(s.BaseCMI),T=function(e){function t(){return e.call(this,{children:a.scorm2004_constants.objectives_children,errorCode:_.scorm2004_errors.READ_ONLY_ELEMENT,errorClass:u})||this}return(0,i.__extends)(t,e),t.prototype.findObjectiveById=function(e){return this.childArray.find((function(t){return t.id===e}))},t.prototype.findObjectiveByIndex=function(e){return this.childArray[e]},t.prototype.setObjectiveByIndex=function(e,t){this.childArray[e]=t},t}(g.CMIArray),L=function(e){function t(){var t=e.call(this)||this;return t._id="",t._success_status="unknown",t._completion_status="unknown",t._progress_measure="",t._description="",t.score=new I,t}return(0,i.__extends)(t,e),t.prototype.reset=function(){this._initialized=!1},t.prototype.initialize=function(){var t;e.prototype.initialize.call(this),null===(t=this.score)||void 0===t||t.initialize()},Object.defineProperty(t.prototype,"id",{get:function(){return this._id},set:function(e){h(e,f.scorm2004_regex.CMILongIdentifier)&&(this._id=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"success_status",{get:function(){return this._success_status},set:function(e){if(this.initialized&&""===this._id)throw new u(_.scorm2004_errors.DEPENDENCY_NOT_ESTABLISHED);h(e,f.scorm2004_regex.CMISStatus)&&(this._success_status=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"completion_status",{get:function(){return this._completion_status},set:function(e){if(this.initialized&&""===this._id)throw new u(_.scorm2004_errors.DEPENDENCY_NOT_ESTABLISHED);h(e,f.scorm2004_regex.CMICStatus)&&(this._completion_status=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"progress_measure",{get:function(){return this._progress_measure},set:function(e){if(this.initialized&&""===this._id)throw new u(_.scorm2004_errors.DEPENDENCY_NOT_ESTABLISHED);h(e,f.scorm2004_regex.CMIDecimal)&&m(e,f.scorm2004_regex.progress_range)&&(this._progress_measure=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"description",{get:function(){return this._description},set:function(e){if(this.initialized&&""===this._id)throw new u(_.scorm2004_errors.DEPENDENCY_NOT_ESTABLISHED);h(e,f.scorm2004_regex.CMILangString250,!0)&&(this._description=e)},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){this.jsonString=!0;var e={id:this.id,success_status:this.success_status,completion_status:this.completion_status,progress_measure:this.progress_measure,description:this.description,score:this.score};return delete this.jsonString,e},t}(s.BaseCMI),N=function(e){function t(){var t=e.call(this)||this;return t.__version="1.0",t.__children=a.scorm2004_constants.cmi_children,t}return(0,i.__extends)(t,e),Object.defineProperty(t.prototype,"_version",{get:function(){return this.__version},set:function(e){throw new u(_.scorm2004_errors.READ_ONLY_ELEMENT)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_children",{get:function(){return this.__children},set:function(e){throw new u(_.scorm2004_errors.READ_ONLY_ELEMENT)},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this._initialized=!1},t}(s.BaseCMI),R=function(e){function t(){var t=e.call(this)||this;return t._learner_id="",t._learner_name="",t}return(0,i.__extends)(t,e),Object.defineProperty(t.prototype,"learner_id",{get:function(){return this._learner_id},set:function(e){if(this.initialized)throw new u(_.scorm2004_errors.READ_ONLY_ELEMENT);this._learner_id=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"learner_name",{get:function(){return this._learner_name},set:function(e){if(this.initialized)throw new u(_.scorm2004_errors.READ_ONLY_ELEMENT);this._learner_name=e},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this._initialized=!1},t}(s.BaseCMI),A=function(e){function t(){var t=e.call(this)||this;return t._completion_status="unknown",t._success_status="unknown",t._progress_measure="",t}return(0,i.__extends)(t,e),Object.defineProperty(t.prototype,"completion_status",{get:function(){return this._completion_status},set:function(e){h(e,f.scorm2004_regex.CMICStatus)&&(this._completion_status=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"success_status",{get:function(){return this._success_status},set:function(e){h(e,f.scorm2004_regex.CMISStatus)&&(this._success_status=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"progress_measure",{get:function(){return this._progress_measure},set:function(e){h(e,f.scorm2004_regex.CMIDecimal)&&m(e,f.scorm2004_regex.progress_range)&&(this._progress_measure=e)},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this._initialized=!1,this._completion_status="incomplete",this._success_status="unknown",this._progress_measure=""},t}(s.BaseCMI),x=r(864),j=function(e){function t(){var t=e.call(this)||this;return t._entry="",t._exit="",t._session_time="PT0H0M0S",t._total_time="",t}return(0,i.__extends)(t,e),Object.defineProperty(t.prototype,"entry",{get:function(){return this._entry},set:function(e){if(this.initialized)throw new u(_.scorm2004_errors.READ_ONLY_ELEMENT);this._entry=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exit",{get:function(){if(!this.jsonString)throw new u(_.scorm2004_errors.WRITE_ONLY_ELEMENT);return this._exit},set:function(e){h(e,f.scorm2004_regex.CMIExit,!0)&&(this._exit=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"session_time",{get:function(){if(!this.jsonString)throw new u(_.scorm2004_errors.WRITE_ONLY_ELEMENT);return this._session_time},set:function(e){h(e,f.scorm2004_regex.CMITimespan)&&(this._session_time=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"total_time",{get:function(){return this._total_time},set:function(e){if(this.initialized)throw new u(_.scorm2004_errors.READ_ONLY_ELEMENT);this._total_time=e},enumerable:!1,configurable:!0}),t.prototype.getCurrentTotalTime=function(){var e=this._session_time,t=this.start_time;if(null!=t){var r=(new Date).getTime()-t;e=x.getSecondsAsISODuration(r/1e3)}return x.addTwoDurations(this._total_time,e,f.scorm2004_regex.CMITimespan)},t.prototype.reset=function(){this._initialized=!1,this._entry="",this._exit="",this._session_time="PT0H0M0S"},t}(s.BaseCMI),D=function(e){function t(){var t=e.call(this)||this;return t._location="",t._launch_data="",t._suspend_data="",t}return(0,i.__extends)(t,e),Object.defineProperty(t.prototype,"location",{get:function(){return this._location},set:function(e){h(e,f.scorm2004_regex.CMIString1000)&&(this._location=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"launch_data",{get:function(){return this._launch_data},set:function(e){if(this.initialized)throw new u(_.scorm2004_errors.READ_ONLY_ELEMENT);this._launch_data=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"suspend_data",{get:function(){return this._suspend_data},set:function(e){h(e,f.scorm2004_regex.CMIString64000,!0)&&(this._suspend_data=e)},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this._initialized=!1,this._location="",this._suspend_data=""},t}(s.BaseCMI),P=function(e){function t(){var t=e.call(this)||this;return t._credit="credit",t._mode="normal",t._time_limit_action="continue,no message",t._max_time_allowed="",t}return(0,i.__extends)(t,e),Object.defineProperty(t.prototype,"credit",{get:function(){return this._credit},set:function(e){if(this.initialized)throw new u(_.scorm2004_errors.READ_ONLY_ELEMENT);this._credit=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mode",{get:function(){return this._mode},set:function(e){if(this.initialized)throw new u(_.scorm2004_errors.READ_ONLY_ELEMENT);this._mode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"time_limit_action",{get:function(){return this._time_limit_action},set:function(e){if(this.initialized)throw new u(_.scorm2004_errors.READ_ONLY_ELEMENT);this._time_limit_action=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"max_time_allowed",{get:function(){return this._max_time_allowed},set:function(e){if(this.initialized)throw new u(_.scorm2004_errors.READ_ONLY_ELEMENT);this._max_time_allowed=e},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this._initialized=!1},t}(s.BaseCMI),F=function(e){function t(){var t=e.call(this)||this;return t._scaled_passing_score="",t._completion_threshold="",t}return(0,i.__extends)(t,e),Object.defineProperty(t.prototype,"scaled_passing_score",{get:function(){return this._scaled_passing_score},set:function(e){if(this.initialized)throw new u(_.scorm2004_errors.READ_ONLY_ELEMENT);this._scaled_passing_score=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"completion_threshold",{get:function(){return this._completion_threshold},set:function(e){if(this.initialized)throw new u(_.scorm2004_errors.READ_ONLY_ELEMENT);this._completion_threshold=e},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this._initialized=!1},t}(s.BaseCMI),z=function(e){function t(t){void 0===t&&(t=!1);var r=e.call(this)||this;return r.metadata=new N,r.learner=new R,r.status=new A,r.session=new j,r.content=new D,r.settings=new P,r.thresholds=new F,r.learner_preference=new p,r.score=new I,r.comments_from_learner=new C,r.comments_from_lms=new O,r.interactions=new b,r.objectives=new T,t&&r.initialize(),r}return(0,i.__extends)(t,e),t.prototype.initialize=function(){var t,r,n,i,o,s,a,c,l,u,_,d,h;e.prototype.initialize.call(this),null===(t=this.metadata)||void 0===t||t.initialize(),null===(r=this.learner)||void 0===r||r.initialize(),null===(n=this.status)||void 0===n||n.initialize(),null===(i=this.session)||void 0===i||i.initialize(),null===(o=this.content)||void 0===o||o.initialize(),null===(s=this.settings)||void 0===s||s.initialize(),null===(a=this.thresholds)||void 0===a||a.initialize(),null===(c=this.learner_preference)||void 0===c||c.initialize(),null===(l=this.score)||void 0===l||l.initialize(),null===(u=this.comments_from_learner)||void 0===u||u.initialize(),null===(_=this.comments_from_lms)||void 0===_||_.initialize(),null===(d=this.interactions)||void 0===d||d.initialize(),null===(h=this.objectives)||void 0===h||h.initialize()},t.prototype.reset=function(){var e,t,r,n,i,o,s,a,c,l,u,_,d;this._initialized=!1,null===(e=this.metadata)||void 0===e||e.reset(),null===(t=this.learner)||void 0===t||t.reset(),null===(r=this.status)||void 0===r||r.reset(),null===(n=this.session)||void 0===n||n.reset(),null===(i=this.content)||void 0===i||i.reset(),null===(o=this.settings)||void 0===o||o.reset(),null===(s=this.thresholds)||void 0===s||s.reset(),null===(a=this.objectives)||void 0===a||a.reset(!1),null===(c=this.interactions)||void 0===c||c.reset(!0),null===(l=this.score)||void 0===l||l.reset(),null===(u=this.comments_from_learner)||void 0===u||u.reset(),null===(_=this.comments_from_lms)||void 0===_||_.reset(),null===(d=this.learner_preference)||void 0===d||d.reset()},Object.defineProperty(t.prototype,"_version",{get:function(){return this.metadata._version},set:function(e){this.metadata._version=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_children",{get:function(){return this.metadata._children},set:function(e){this.metadata._children=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"completion_status",{get:function(){return this.status.completion_status},set:function(e){this.status.completion_status=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"completion_threshold",{get:function(){return this.thresholds.completion_threshold},set:function(e){this.thresholds.completion_threshold=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"credit",{get:function(){return this.settings.credit},set:function(e){this.settings.credit=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"entry",{get:function(){return this.session.entry},set:function(e){this.session.entry=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exit",{get:function(){return this.session.jsonString=this.jsonString,this.session.exit},set:function(e){this.session.exit=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"launch_data",{get:function(){return this.content.launch_data},set:function(e){this.content.launch_data=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"learner_id",{get:function(){return this.learner.learner_id},set:function(e){this.learner.learner_id=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"learner_name",{get:function(){return this.learner.learner_name},set:function(e){this.learner.learner_name=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"location",{get:function(){return this.content.location},set:function(e){this.content.location=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"max_time_allowed",{get:function(){return this.settings.max_time_allowed},set:function(e){this.settings.max_time_allowed=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mode",{get:function(){return this.settings.mode},set:function(e){this.settings.mode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"progress_measure",{get:function(){return this.status.progress_measure},set:function(e){this.status.progress_measure=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scaled_passing_score",{get:function(){return this.thresholds.scaled_passing_score},set:function(e){this.thresholds.scaled_passing_score=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"session_time",{get:function(){return this.session.jsonString=this.jsonString,this.session.session_time},set:function(e){this.session.session_time=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"success_status",{get:function(){return this.status.success_status},set:function(e){this.status.success_status=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"suspend_data",{get:function(){return this.content.suspend_data},set:function(e){this.content.suspend_data=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"time_limit_action",{get:function(){return this.settings.time_limit_action},set:function(e){this.settings.time_limit_action=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"total_time",{get:function(){return this.session.total_time},set:function(e){this.session.total_time=e},enumerable:!1,configurable:!0}),t.prototype.getCurrentTotalTime=function(){return this.session.getCurrentTotalTime()},t.prototype.toJSON=function(){this.jsonString=!0,this.session.jsonString=!0;var e={comments_from_learner:this.comments_from_learner,comments_from_lms:this.comments_from_lms,completion_status:this.completion_status,completion_threshold:this.completion_threshold,credit:this.credit,entry:this.entry,exit:this.exit,interactions:this.interactions,launch_data:this.launch_data,learner_id:this.learner_id,learner_name:this.learner_name,learner_preference:this.learner_preference,location:this.location,max_time_allowed:this.max_time_allowed,mode:this.mode,objectives:this.objectives,progress_measure:this.progress_measure,scaled_passing_score:this.scaled_passing_score,score:this.score,session_time:this.session_time,success_status:this.success_status,suspend_data:this.suspend_data,time_limit_action:this.time_limit_action};return delete this.jsonString,delete this.session.jsonString,e},t}(s.BaseRootCMI),V=r(56),k=function(e){function t(){var t=e.call(this)||this;return t.data=new G,t.nav=new U,t.data=new G,t}return(0,i.__extends)(t,e),t.prototype.initialize=function(){var t;e.prototype.initialize.call(this),null===(t=this.nav)||void 0===t||t.initialize()},t.prototype.reset=function(){var e;this._initialized=!1,null===(e=this.nav)||void 0===e||e.reset()},t.prototype.toJSON=function(){this.jsonString=!0;var e={nav:this.nav,data:this.data};return delete this.jsonString,e},t}(s.BaseCMI),U=function(e){function t(){var t=e.call(this)||this;return t._request="_none_",t.request_valid=new B,t}return(0,i.__extends)(t,e),t.prototype.initialize=function(){var t;e.prototype.initialize.call(this),null===(t=this.request_valid)||void 0===t||t.initialize()},t.prototype.reset=function(){var e;this._initialized=!1,this._request="_none_",null===(e=this.request_valid)||void 0===e||e.reset()},Object.defineProperty(t.prototype,"request",{get:function(){return this._request},set:function(e){h(e,f.scorm2004_regex.NAVEvent)&&(this._request=e)},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){this.jsonString=!0;var e={request:this.request};return delete this.jsonString,e},t}(s.BaseCMI),G=function(e){function t(){return e.call(this,{children:a.scorm2004_constants.adl_data_children,errorCode:_.scorm2004_errors.READ_ONLY_ELEMENT,errorClass:u})||this}return(0,i.__extends)(t,e),t}(g.CMIArray),H=function(e){function t(){var t=e.call(this)||this;return t._id="",t._store="",t}return(0,i.__extends)(t,e),t.prototype.reset=function(){this._initialized=!1},Object.defineProperty(t.prototype,"id",{get:function(){return this._id},set:function(e){h(e,f.scorm2004_regex.CMILongIdentifier)&&(this._id=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"store",{get:function(){return this._store},set:function(e){h(e,f.scorm2004_regex.CMILangString4000)&&(this._store=e)},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){this.jsonString=!0;var e={id:this._id,store:this._store};return delete this.jsonString,e},t}(s.BaseCMI),B=function(e){function t(){var t=e.call(this)||this;return t._continue="unknown",t._previous="unknown",t._choice={},t._jump={},t}return(0,i.__extends)(t,e),t.prototype.reset=function(){this._initialized=!1,this._continue="unknown",this._previous="unknown"},Object.defineProperty(t.prototype,"continue",{get:function(){return this._continue},set:function(e){if(this.initialized)throw new u(_.scorm2004_errors.READ_ONLY_ELEMENT);h(e,f.scorm2004_regex.NAVBoolean)&&(this._continue=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"previous",{get:function(){return this._previous},set:function(e){if(this.initialized)throw new u(_.scorm2004_errors.READ_ONLY_ELEMENT);h(e,f.scorm2004_regex.NAVBoolean)&&(this._previous=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"choice",{get:function(){return this._choice},set:function(e){if(this.initialized)throw new u(_.scorm2004_errors.READ_ONLY_ELEMENT);if("object"!=typeof e)throw new u(_.scorm2004_errors.TYPE_MISMATCH);for(var t in e)({}).hasOwnProperty.call(e,t)&&h(e[t],f.scorm2004_regex.NAVBoolean)&&h(t,f.scorm2004_regex.NAVTarget)&&(this._choice[t]=V.NAVBoolean[e[t]])},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"jump",{get:function(){return this._jump},set:function(e){if(this.initialized)throw new u(_.scorm2004_errors.READ_ONLY_ELEMENT);if("object"!=typeof e)throw new u(_.scorm2004_errors.TYPE_MISMATCH);for(var t in e)({}).hasOwnProperty.call(e,t)&&h(e[t],f.scorm2004_regex.NAVBoolean)&&h(t,f.scorm2004_regex.NAVTarget)&&(this._jump[t]=V.NAVBoolean[e[t]])},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){this.jsonString=!0;var e={previous:this._previous,continue:this._continue,choice:this._choice,jump:this._jump};return delete this.jsonString,e},t}(s.BaseCMI),Y=["aa","ab","ae","af","ak","am","an","ar","as","av","ay","az","ba","be","bg","bh","bi","bm","bn","bo","br","bs","ca","ce","ch","co","cr","cs","cu","cv","cy","da","de","dv","dz","ee","el","en","eo","es","et","eu","fa","ff","fi","fj","fo","fr","fy","ga","gd","gl","gn","gu","gv","ha","he","hi","ho","hr","ht","hu","hy","hz","ia","id","ie","ig","ii","ik","io","is","it","iu","ja","jv","ka","kg","ki","kj","kk","kl","km","kn","ko","kr","ks","ku","kv","kw","ky","la","lb","lg","li","ln","lo","lt","lu","lv","mg","mh","mi","mk","ml","mn","mo","mr","ms","mt","my","na","nb","nd","ne","ng","nl","nn","no","nr","nv","ny","oc","oj","om","or","os","pa","pi","pl","ps","pt","qu","rm","rn","ro","ru","rw","sa","sc","sd","se","sg","sh","si","sk","sl","sm","sn","so","sq","sr","ss","st","su","sv","sw","ta","te","tg","th","ti","tk","tl","tn","to","tr","ts","tt","tw","ty","ug","uk","ur","uz","ve","vi","vo","wa","wo","xh","yi","yo","za","zh","zu","aar","abk","ave","afr","aka","amh","arg","ara","asm","ava","aym","aze","bak","bel","bul","bih","bis","bam","ben","tib","bod","bre","bos","cat","che","cha","cos","cre","cze","ces","chu","chv","wel","cym","dan","ger","deu","div","dzo","ewe","gre","ell","eng","epo","spa","est","baq","eus","per","fas","ful","fin","fij","fao","fre","fra","fry","gle","gla","glg","grn","guj","glv","hau","heb","hin","hmo","hrv","hat","hun","arm","hye","her","ina","ind","ile","ibo","iii","ipk","ido","ice","isl","ita","iku","jpn","jav","geo","kat","kon","kik","kua","kaz","kal","khm","kan","kor","kau","kas","kur","kom","cor","kir","lat","ltz","lug","lim","lin","lao","lit","lub","lav","mlg","mah","mao","mri","mac","mkd","mal","mon","mol","mar","may","msa","mlt","bur","mya","nau","nob","nde","nep","ndo","dut","nld","nno","nor","nbl","nav","nya","oci","oji","orm","ori","oss","pan","pli","pol","pus","por","que","roh","run","rum","ron","rus","kin","san","srd","snd","sme","sag","slo","sin","slk","slv","smo","sna","som","alb","sqi","srp","ssw","sot","sun","swe","swa","tam","tel","tgk","tha","tir","tuk","tgl","tsn","ton","tur","tso","tat","twi","tah","uig","ukr","urd","uzb","ven","vie","vol","wln","wol","xho","yid","yor","zha","chi","zho","zul"];function q(e,t,r,n,o,s,a,c){return(0,i.__awaiter)(this,void 0,void 0,(function(){var l,u,_,d,h;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return e&&"normal"===t.mode&&"credit"===t.credit&&(t.completion_threshold&&t.progress_measure&&(t.progress_measure>=t.completion_threshold?t.completion_status="completed":t.completion_status="incomplete"),t.scaled_passing_score&&t.score.scaled&&(t.score.scaled>=t.scaled_passing_score?t.success_status="passed":t.success_status="failed")),l=!1,r.nav.request!==(null===(h=null===(d=null==n?void 0:n.adl)||void 0===d?void 0:d.nav)||void 0===h?void 0:h.request)&&"_none_"!==r.nav.request&&(l=!0),u=s(e),"string"!=typeof o.lmsCommitUrl?[3,2]:[4,a(o.lmsCommitUrl,{commitObject:u},e)];case 1:return _=i.sent(),l&&void 0!==_.navRequest&&""!==_.navRequest?Function('"use strict";(() => { '.concat(_.navRequest," })()"))():(null==_?void 0:_.navRequest)&&!l&&_.navRequest.name&&c(_.navRequest.name,_.navRequest.data),[2,_];case 2:return[2,{result:"true",errorCode:0}]}}))}))}var $=function(e){function t(t){var r=this;return t&&void 0===t.mastery_override&&(t.mastery_override=!1),(r=e.call(this,_.scorm2004_errors,t)||this)._version="1.0",r._globalObjectives=[],r.cmi=new z,r.adl=new k,r.Initialize=r.lmsInitialize,r.Terminate=r.lmsFinish,r.GetValue=r.lmsGetValue,r.SetValue=r.lmsSetValue,r.Commit=r.lmsCommit,r.GetLastError=r.lmsGetLastError,r.GetErrorString=r.lmsGetErrorString,r.GetDiagnostic=r.lmsGetDiagnostic,r}return(0,i.__extends)(t,e),t.prototype.reset=function(e){var t,r;this.commonReset(e),null===(t=this.cmi)||void 0===t||t.reset(),null===(r=this.adl)||void 0===r||r.reset()},Object.defineProperty(t.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"globalObjectives",{get:function(){return this._globalObjectives},enumerable:!1,configurable:!0}),t.prototype.lmsInitialize=function(){return this.cmi.initialize(),this.initialize("Initialize","LMS was already initialized!","LMS is already finished!")},t.prototype.lmsFinish=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return[4,this.internalFinish()];case 1:return e.sent(),[2]}}))})),a.global_constants.SCORM_TRUE},t.prototype.internalFinish=function(){return(0,i.__awaiter)(this,void 0,void 0,(function(){var e,t,r,n,o,s,c,l,u,_,d;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,this.terminate("Terminate",!0)];case 1:return(e=i.sent())===a.global_constants.SCORM_TRUE&&("_none_"!==this.adl.nav.request?(t={continue:"SequenceNext",previous:"SequencePrevious",choice:"SequenceChoice",jump:"SequenceJump",exit:"SequenceExit",exitAll:"SequenceExitAll",abandon:"SequenceAbandon",abandonAll:"SequenceAbandonAll"},r=this.adl.nav.request,n=new RegExp(f.scorm2004_regex.NAVEvent),o=r.match(n),s="",o&&((null===(l=o.groups)||void 0===l?void 0:l.choice_target)?(s=null===(u=o.groups)||void 0===u?void 0:u.choice_target,r="choice"):(null===(_=o.groups)||void 0===_?void 0:_.jump_target)&&(s=null===(d=o.groups)||void 0===d?void 0:d.jump_target,r="jump")),(c=t[r])&&this.processListeners(c,"adl.nav.request",s)):this.settings.autoProgress&&this.processListeners("SequenceNext")),[2,e]}}))}))},t.prototype.lmsGetValue=function(e){var t="^adl\\.nav\\.request_valid\\.(choice|jump)\\.{target=\\S{0,}([a-zA-Z0-9-_]+)}$";if((0,x.stringMatches)(e,t)){var r=e.match(t),n=r[1],i=r[2].replace("{target=","").replace("}","");if("choice"===n||"jump"===n)return this.settings.scoItemIdValidator?String(this.settings.scoItemIdValidator(i)):String(this.settings.scoItemIds.includes(i))}return this.getValue("GetValue",!0,e)},t.prototype.lmsSetValue=function(e,t){return this.setValue("SetValue","Commit",!0,e,t)},t.prototype.lmsCommit=function(){return this.settings.asyncCommit?this.scheduleCommit(500,"Commit"):(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return[4,this.commit("Commit",!1)];case 1:return e.sent(),[2]}}))})),a.global_constants.SCORM_TRUE},t.prototype.lmsGetLastError=function(){return this.getLastError("GetLastError")},t.prototype.lmsGetErrorString=function(e){return this.getErrorString("GetErrorString",e)},t.prototype.lmsGetDiagnostic=function(e){return this.getDiagnostic("GetDiagnostic",e)},t.prototype.setCMIValue=function(e,t){return function(e,t,r,n,i,o){if((0,x.stringMatches)(e,"cmi\\.objectives\\.\\d+")){var s,a=e.split("."),c=Number(a[2]),l="cmi.objectives.".concat(c);if((0,x.stringMatches)(e,"cmi\\.objectives\\.\\d+\\.id"))s=t;else{var u=o.findObjectiveByIndex(c);s=u?u.id:void 0}if(s&&i.includes(s)){var _=n.findIndex((function(e){return e.id===s}));if(-1===_){_=n.length;var d=new L;d.id=s,n.push(d)}r("SetGlobalObjectiveValue",!0,e.replace(l,"_globalObjectives.".concat(_)),t)}}return r("SetValue",!0,e,t)}(e,t,this._commonSetCMIValue.bind(this),this._globalObjectives,this.settings.globalObjectiveIds,this.cmi.objectives)},t.prototype.getChildElement=function(e,t,r){return function(e,t,r,n){if((0,x.stringMatches)(e,"cmi\\.objectives\\.\\d+"))return new L;if(r){if((0,x.stringMatches)(e,"cmi\\.interactions\\.\\d+\\.correct_responses\\.\\d+"))return n(e,t);if((0,x.stringMatches)(e,"cmi\\.interactions\\.\\d+\\.objectives\\.\\d+"))return new M}else if((0,x.stringMatches)(e,"cmi\\.interactions\\.\\d+"))return new y;return(0,x.stringMatches)(e,"cmi\\.comments_from_learner\\.\\d+")?new w:(0,x.stringMatches)(e,"cmi\\.comments_from_lms\\.\\d+")?new w(!0):(0,x.stringMatches)(e,"adl\\.data\\.\\d+")?new H:null}(e,t,r,this.createCorrectResponsesObject.bind(this))},t.prototype.createCorrectResponsesObject=function(e,t){return function(e,t,r,n,i,o,s,a,c){var l=e.split("."),u=r[Number(l[2])];if(a){if(void 0===u||!u.type)return n(_.scorm2004_errors.DEPENDENCY_NOT_ESTABLISHED),null;i(u,t,n,s);var d=v[u.type];if(!d)return n(_.scorm2004_errors.GENERAL_SET_FAILURE,"Incorrect Response Type: "+u.type),null;o(d,t,u.type,n,c)}return"0"===s?new S:null}(e,t,this.cmi.interactions.childArray,this.throwSCORMError.bind(this),this.checkDuplicateChoiceResponse.bind(this),this.checkValidResponseType.bind(this),this.lastErrorCode,this.isInitialized(),this.checkCorrectResponseValue.bind(this))},t.prototype.checkValidResponseType=function(e,t,r){!function(e,t,r,n,i){var o=[];(null==e?void 0:e.delimiter)?o=String(t).split(e.delimiter):o[0]=t,o.length>0&&o.length<=e.max?i(r,o,t):o.length>e.max&&n(_.scorm2004_errors.GENERAL_SET_FAILURE,"Data Model Element Pattern Too Long")}(e,t,r,this.throwSCORMError.bind(this),this.checkCorrectResponseValue.bind(this))},t.prototype.checkDuplicateChoiceResponse=function(e,t){!function(e,t,r,n){var i=e.correct_responses._count;if("choice"===e.type)for(var o=0;o<i&&"0"===n;o++)e.correct_responses.childArray[o].pattern===t&&r(_.scorm2004_errors.GENERAL_SET_FAILURE)}(e,t,this.throwSCORMError.bind(this),this.lastErrorCode)},t.prototype.validateCorrectResponse=function(e,t){var r=e.split("."),n=Number(r[2]);!function(e,t,r,n,i,o,s,a,c){var l=e.split("."),u=Number(l[4]),d=r.correct_responses._count;o(r,t,n,i);var h=v[r.type];void 0===h.limit||d<=h.limit?(s(h,t,r.type,n,c),"0"===i&&(!h.duplicate||!a(r.correct_responses,u,t))||"0"===i&&""===t||"0"===i&&n(_.scorm2004_errors.GENERAL_SET_FAILURE,"Data Model Element Pattern Already Exists")):n(_.scorm2004_errors.GENERAL_SET_FAILURE,"Data Model Element Collection Limit Reached")}(e,t,this.cmi.interactions.childArray[n],this.throwSCORMError.bind(this),this.lastErrorCode,this.checkDuplicateChoiceResponse.bind(this),this.checkValidResponseType.bind(this),this.checkDuplicatedPattern.bind(this),this.checkCorrectResponseValue.bind(this))},t.prototype.getCMIValue=function(e){return function(e,t){return t("GetValue",!0,e)}(e,this._commonGetCMIValue.bind(this))},t.prototype.getLmsErrorMessageDetails=function(e,t){var r="",n="";return e=String(e),a.scorm2004_constants.error_descriptions[e]&&(r=a.scorm2004_constants.error_descriptions[e].basicMessage,n=a.scorm2004_constants.error_descriptions[e].detailMessage),t?n:r},t.prototype.checkDuplicatedPattern=function(e,t,r){return function(e,t,r){for(var n=!1,i=e._count,o=0;o<i&&!n;o++)o!==t&&e.childArray[o]===r&&(n=!0);return n}(e,t,r)},t.prototype.checkCorrectResponseValue=function(e,t,r){!function(e,t,r,n,i,o){for(var s=v[e],a=new RegExp(s.format),c=0;c<t.length&&"0"===o;c++)if(e.match("^(fill-in|long-fill-in|matching|performance|sequencing)$")&&(t[c]=i(t[c])),null==s?void 0:s.delimiter2){var l=t[c].split(s.delimiter2);2===l.length&&(u=l[0].match(a))&&s.format2&&l[1].match(new RegExp(s.format2))||n(_.scorm2004_errors.TYPE_MISMATCH)}else{var u;if(!(u=t[c].match(a))&&""!==r||!u&&"true-false"===e)n(_.scorm2004_errors.TYPE_MISMATCH);else if("numeric"===e&&t.length>1)Number(t[0])>Number(t[1])&&n(_.scorm2004_errors.TYPE_MISMATCH);else if(""!==t[c]&&s.unique)for(var d=0;d<c&&"0"===o;d++)t[c]===t[d]&&n(_.scorm2004_errors.TYPE_MISMATCH)}}(e,t,r,this.throwSCORMError.bind(this),this.removeCorrectResponsePrefixes.bind(this),this.lastErrorCode)},t.prototype.removeCorrectResponsePrefixes=function(e){return function(e,t){for(var r=!1,n=!1,i=!1,o=new RegExp("^({(lang|case_matters|order_matters)=([^}]+)})"),s=e.match(o),a=null;s;){switch(s[2]){case"lang":if(a=e.match(f.scorm2004_regex.CMILangcr)){var c=a[3];void 0!==c&&c.length>0&&(Y.includes(c.toLowerCase())||t(_.scorm2004_errors.TYPE_MISMATCH))}i=!0;break;case"case_matters":i||r||n||"true"!==s[3]&&"false"!==s[3]&&t(_.scorm2004_errors.TYPE_MISMATCH),n=!0;break;case"order_matters":n||i||r||"true"!==s[3]&&"false"!==s[3]&&t(_.scorm2004_errors.TYPE_MISMATCH),r=!0}s=(e=e.substring(s[1].length)).match(o)}return e}(e,this.throwSCORMError.bind(this))},t.prototype.replaceWithAnotherScormAPI=function(e){this.cmi=e.cmi,this.adl=e.adl},t.prototype.renderCommitCMI=function(e){return function(e,t,r,n){var i=n();e&&(i.cmi.total_time=t.getCurrentTotalTime());var o=[],s=x.flatten(i);switch(r.dataCommitFormat){case"flattened":return x.flatten(i);case"params":for(var a in s)({}).hasOwnProperty.call(s,a)&&o.push("".concat(a,"=").concat(s[a]));return o;default:return i}}(e,this.cmi,this.settings,this.renderCMIToJSONObject.bind(this))},t.prototype.renderCommitObject=function(e){return function(e,t,r){var n=r(e),i=t.getCurrentTotalTime(),o=x.getDurationAsSeconds(i,f.scorm2004_regex.CMITimespan),s=V.CompletionStatus.UNKNOWN,a=V.SuccessStatus.UNKNOWN;t.completion_status&&("completed"===t.completion_status?s=V.CompletionStatus.COMPLETED:"incomplete"===t.completion_status&&(s=V.CompletionStatus.INCOMPLETE)),t.success_status&&("passed"===t.success_status?a=V.SuccessStatus.PASSED:"failed"===t.success_status&&(a=V.SuccessStatus.FAILED));var c=t.score,l=null;c&&(l={},Number.isNaN(Number.parseFloat(c.raw))||(l.raw=Number.parseFloat(c.raw)),Number.isNaN(Number.parseFloat(c.min))||(l.min=Number.parseFloat(c.min)),Number.isNaN(Number.parseFloat(c.max))||(l.max=Number.parseFloat(c.max)),Number.isNaN(Number.parseFloat(c.scaled))||(l.scaled=Number.parseFloat(c.scaled)));var u={completionStatus:s,successStatus:a,totalTimeSeconds:o,runtimeData:n};return l&&(u.score=l),u}(e,this.cmi,this.renderCommitCMI.bind(this))},t.prototype.storeData=function(e){return(0,i.__awaiter)(this,void 0,void 0,(function(){return(0,i.__generator)(this,(function(t){return[2,q(e,this.cmi,this.adl,this.startingData,this.settings,this.getCommitObject.bind(this),this.processHttpRequest.bind(this),this.processListeners.bind(this))]}))}))},t}(o.default),J=window;for(var Z in n)J[Z]=n[Z];n.__esModule&&Object.defineProperty(J,"__esModule",{value:!0})}();
//# sourceMappingURL=scorm2004.min.js.map